require=function r(c,s,a){function l(i,t){if(!s[i]){if(!c[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(u)return u(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[i]={exports:{}};c[i][0].call(o.exports,function(t){var e=c[i][1][t];return l(e||t)},o,o.exports,r,c,s,a)}return s[i].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)l(a[t]);return l}({BlockBuilder:[function(t,e,i){"use strict";cc._RF.push(e,"9f661ss2YRAj6AIYWV5T2Ap","BlockBuilder"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o,r,c,s,a,l,u,h,f=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),d=t("./ColorBlock"),p=(h=d)&&h.__esModule?h:{default:h};function _(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function g(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(i,n,t,e,o){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce(function(t,e){return e(i,n,t)||t},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(i,n,r),r=null),r}var v=t("SimpleLayout"),m=cc._decorator,S=m.ccclass,b=m.property,C=(n=b(cc.Prefab),o=b(v),r=b(),S((s=function(t){function c(){var t,e,i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,c);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return _(e=i=g(this,(t=c.__proto__||Object.getPrototypeOf(c)).call.apply(t,[this].concat(o))),"colorBlock",a,i),_(i,"simpleLayout",l,i),_(i,"_speed",u,i),g(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,cc.Component),f(c,[{key:"generate",value:function(){this.simpleLayout.resetLayout();for(var t=0;t<this._speed;t++){var e=cc.instantiate(this.colorBlock);this.node.addChild(e),e.getComponent(p.default).setup(Math.floor(6*Math.random())),this.simpleLayout.addItem(e)}this.sendMessage()}},{key:"removeSome",value:function(){for(var t=Math.min(this.node.childrenCount,this._speed),e=0;e<t;e++){this.node.children[e].destroy()}this.scheduleOnce(this.sendMessage.bind(this))}},{key:"removeAll",value:function(){this.node.children.map(function(t){return t.destroy()}),this.scheduleOnce(this.sendMessage.bind(this))}},{key:"sendMessage",value:function(){var t=this.node.childrenCount,e=new cc.Event.EventCustom("blocks_num_change",!0);e.setUserData({counts:t}),this.node.dispatchEvent(e)}}]),c}(),a=y(s.prototype,"colorBlock",[n],{enumerable:!0,initializer:function(){return null}}),l=y(s.prototype,"simpleLayout",[o],{enumerable:!0,initializer:function(){return null}}),u=y(s.prototype,"_speed",[r],{enumerable:!0,initializer:function(){return 10}}),c=s))||c);i.default=C,e.exports=i.default,cc._RF.pop()},{"./ColorBlock":"ColorBlock",SimpleLayout:"SimpleLayout"}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"d4594TSpjxFLoJyX5fIU7QR","Bullet"),cc.Class({extends:cc.Component,properties:{isMoving:!0,speed:100,enenyLaunch:{default:null,type:cc.Node},explodeParti:{default:null,type:cc.Prefab}},onLoad:function(){},update:function(t){if(450<this.node.y||this.node.y<-450)this.node.destroy();else{this.isMoving&&this.node.setPositionY(this.node.y+this.speed*t),this.enenys=[],this.enenys=this.enenyLaunch.getChildren();for(var e=0;e<this.enenys.length;++e){var i=this.node.getBoundingBox(),n=this.enenys[e].getBoundingBox();cc.rectIntersectsRect(i,n)&&(cc.log("collider"),this.node.destroy(),this.enenys[e].destroy())}}}}),cc._RF.pop()},{}],CardName:[function(t,e,i){"use strict";cc._RF.push(e,"0a17fskI5JLiIx/sbkvjNnY","CardName"),cc.Class({extends:cc.Component,properties:{textName:{default:null,type:cc.Label}},setup:function(t){t!=this.data&&(this.data=t,this.setDispalyName(this.data))},clean:function(){this.data=null},setDispalyName:function(t){cc.isValid(this.textName)&&(this.textName.string=t||"")}}),cc._RF.pop()},{}],ColorBlock:[function(t,e,i){"use strict";cc._RF.push(e,"ff749AcL+tHJLCa1XitU9Gx","ColorBlock"),Object.defineProperty(i,"__esModule",{value:!0});var n,o,r,h,c=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s,a,l,u,d,p,_=cc._decorator,g=_.ccclass,y=(n=(0,_.property)(cc.Sprite),g((r=function(t){function u(){var t,e,i,n,o,r,c;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return i=f(this,(t=u.__proto__||Object.getPrototypeOf(u)).call.apply(t,[this].concat(a))),o="sprite",c=n=e=i,(r=h)&&Object.defineProperty(n,o,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(c):void 0}),f(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,cc.Component),c(u,[{key:"setup",value:function(){var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;cc.loader.loadRes("icon_"+t,cc.SpriteFrame,function(t,e){if(r.sprite&&!t){r.sprite.spriteFrame=e;var i=6*Math.random(),n=cc.sequence(cc.moveTo(i,cc.p(642,r.node.y)),cc.moveTo(i,cc.p(-642,r.node.y))),o=cc.repeatForever(n);r.node.runAction(o)}})}}]),u}(),s=r.prototype,a="sprite",l=[n],u={enumerable:!0,initializer:function(){return null}},p={},Object.keys(u).forEach(function(t){p[t]=u[t]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(t,e){return e(s,a,t)||t},p),d&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(d):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(s,a,p),p=null),h=p,o=r))||o);i.default=y,e.exports=i.default,cc._RF.pop()},{}],EnenyBullet:[function(t,e,i){"use strict";cc._RF.push(e,"04062EYQwpHqaDoJWSpiZtU","EnenyBullet"),cc.Class({extends:cc.Component,properties:{isMoving:!0,speed:200,player:{default:null,type:cc.Node},explodeParti:{default:null,type:cc.Prefab}},onLoad:function(){},update:function(t){if(this.node.y<-450)this.node.destroy();else{this.isMoving&&this.node.setPositionY(this.node.y-this.speed*t);var e=this.node.getBoundingBox(),i=this.player.getBoundingBox();cc.rectIntersectsRect(e,i)&&(cc.log("collider"),this.node.destroy()),cc.log("check")}}}),cc._RF.pop()},{}],EnenyLaunch:[function(t,e,i){"use strict";cc._RF.push(e,"3f0d7bw/W1Anb50R4h5y9Ij","EnenyLaunch"),cc.Class({extends:cc.Component,properties:{eneny:{default:null,type:cc.Prefab},player:{default:null,type:cc.Node}},onLoad:function(){this.schedule(function(){this.launchEney()},.5)},launchEney:function(){var t=cc.instantiate(this.eneny);t.parent=this.node,t.getComponent("Eneny").player=this.player,t.setPosition(400*cc.random0To1()-200,450)}}),cc._RF.pop()},{}],Eneny:[function(t,e,i){"use strict";cc._RF.push(e,"da0eeUSkO1Cv7B4jj/y66JX","Eneny"),cc.Class({extends:cc.Component,properties:{isMoving:!0,speed:100,enenyBullet:{default:null,type:cc.Prefab},player:{default:null,type:cc.Node}},onLoad:function(){this.schedule(function(){this.launchBullet()},.8)},launchBullet:function(){var t=cc.instantiate(this.enenyBullet);t.parent=this.player.parent,t.setPosition(this.node.position),t.getComponent("EnenyBullet").player=this.player},update:function(t){this.node.y<-450&&this.node.destroy(),this.isMoving&&this.node.setPositionY(this.node.y-this.speed*t)}}),cc._RF.pop()},{}],ExitButton:[function(t,e,i){"use strict";cc._RF.push(e,"eaeea3QAJFJcIuCY12L0/fm","ExitButton"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o,r,h,c,s=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var c=o.get;return void 0!==c?c.call(n):void 0},l=t("./MenuButton"),f=(c=l)&&c.__esModule?c:{default:c};function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u,p,_,g,y,v,m=t("SysEvent"),S=cc._decorator,b=S.ccclass,C=S.property,F=0,x=(n=C(m),b((r=function(t){function u(){var t,e,i,n,o,r,c;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return i=d(this,(t=u.__proto__||Object.getPrototypeOf(u)).call.apply(t,[this].concat(a))),o="sysEvent",c=n=e=i,(r=h)&&Object.defineProperty(n,o,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(c):void 0}),d(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,f.default),s(u,[{key:"onLoad",value:function(){var t=this;a(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"onLoad",this).call(this),this.param=[{text:"EXIT",onConfirm:function(){t.exitGame()}},{text:"RESTART",onConfirm:function(){t.restartGame()}}],this.setup(this.param[0])}},{key:"onGotFocus",value:function(){a(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"onGotFocus",this).call(this),this.sysEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onkeyUp,this)}},{key:"onLoseFocus",value:function(){a(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"onLoseFocus",this).call(this),this.sysEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onkeyUp,this)}},{key:"onkeyUp",value:function(t){switch(t.keyCode){case cc.KEY.left:case cc.KEY.dpadLeft:case cc.KEY.right:case cc.KEY.dpadRight:this.responseAction(),this.setup(this.param[++F%2]),t.stopPropagation()}}},{key:"exitGame",value:function(){cc.game.end()}},{key:"restartGame",value:function(){cc.game.restart()}},{key:"responseAction",value:function(){this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.2,.85),cc.scaleTo(.2,1.18),cc.scaleTo(.2,1)))}}]),u}(),u=r.prototype,p="sysEvent",_=[n],g={enumerable:!0,initializer:function(){return null}},v={},Object.keys(g).forEach(function(t){v[t]=g[t]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=_.slice().reverse().reduce(function(t,e){return e(u,p,t)||t},v),y&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(y):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(u,p,v),v=null),h=v,o=r))||o);i.default=x,e.exports=i.default,cc._RF.pop()},{"./MenuButton":"MenuButton",SysEvent:"SysEvent"}],Focusable:[function(t,e,i){"use strict";cc._RF.push(e,"74665KfKi1Oabd/kIzvlvz7","Focusable");var n=t("SysFocus");cc.Class({extends:n,properties:{left:{default:null,type:cc.Node},isLeftEnabled:!1,right:{default:null,type:cc.Node},isRightEnabled:!1,up:{default:null,type:cc.Node},isUpEnabled:!1,down:{default:null,type:cc.Node},isDownEnabled:!1},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,function(t){this.isFocus()?this.onConfirm():this.requireFocus()},this)},checkLinkingFocus:function(t,e){return 0!=e?0<e?this.up:this.down:0!=t?0<t?this.right:this.left:null},checkLinkingFocusEnabled:function(t,e){return 0!=e?0<e?this.isUpEnabled:this.isDownEnabled:0!=t?0<t?this.isRightEnabled:this.isLeftEnabled:null},onGotFocus:function(){},onLoseFocus:function(){},onConfirm:function(){}}),cc._RF.pop()},{SysFocus:"SysFocus"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"87defWm2+dPqb77cYB0zrbP","Game"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o,r,c,s,a,l,u,h,f,d,p,_,g,y=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),v=S(t("./Menu")),m=S(t("./BlockBuilder"));function S(t){return t&&t.__esModule?t:{default:t}}function b(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function F(i,n,t,e,o){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce(function(t,e){return e(i,n,t)||t},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(i,n,r),r=null),r}var x=t("SysFocusGroup"),w=(t("ToggleFocus"),cc._decorator),P=w.ccclass,E=w.property,k=[30,60],I=0,A=(n=E(v.default),o=E(m.default),r=E(x),c=E(cc.Mask),s=E(cc.Label),a=E(cc.Label),P((u=function(t){function c(){var t,e,i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,c);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return b(e=i=C(this,(t=c.__proto__||Object.getPrototypeOf(c)).call.apply(t,[this].concat(o))),"menu",h,i),b(i,"blockBuilder",f,i),b(i,"menuFocusGroup",d,i),b(i,"blocksMask",p,i),b(i,"mode",_,i),b(i,"count",g,i),C(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,cc.Component),y(c,[{key:"onLoad",value:function(){var t=this;cc.director.setDisplayStats(!0),cc.renderer==cc.rendererCanvas&&cc.renderer.setDirtyRegionCountThreshold(20),this.setStatus();var e=[{text:"PLAY",onConfirm:function(){return t.playAction()}},{text:"PAUSE",onConfirm:function(){return t.pauseAction()}},{text:"ADD",onConfirm:function(){return t.addItem()}},{text:"REMOVE",onConfirm:function(){return t.removeSome()}},{text:"GC",onConfirm:function(){return t.startGC()}},{text:"CLEAN",onConfirm:function(){return t.removeAll()}},{text:"FRAME",onConfirm:function(){return t.switchFrameRate()}},{text:"DIRTY",onConfirm:function(){t.switchDirty()}}];this.menu.setup(e)}},{key:"onEnable",value:function(){this.node.on("blocks_num_change",this.refreshCount,this)}},{key:"onDisable",value:function(){this.node.off("blocks_num_change",this.refreshCount,this)}},{key:"playAction",value:function(){this._actions&&(cc.director.getActionManager().resumeTargets(this._actions),this._actions=null)}},{key:"pauseAction",value:function(){this._actions||(this._actions=cc.director.getActionManager().pauseAllRunningActions())}},{key:"addItem",value:function(){this.blockBuilder.generate()}},{key:"removeSome",value:function(){this.blockBuilder.removeSome()}},{key:"startGC",value:function(){cc.sys.garbageCollect()}},{key:"removeAll",value:function(){this.blockBuilder.removeAll()}},{key:"mask",value:function(){this.blocksMask.enabled=!this.blocksMask.enabled}},{key:"switchFrameRate",value:function(){var t=k[I++%2];cc.director.setAnimationInterval(1/t),clog("帧率是"+t)}},{key:"switchDirty",value:function(){if(cc.renderer==cc.rendererCanvas){var t=cc.renderer.isDirtyRegionEnabled();cc.renderer.enableDirtyRegion(!t),this.setStatus(!t)}}},{key:"focusGroup",value:function(){this.menuFocusGroup.Captivity=!this.menuFocusGroup.Captivity}},{key:"setStatus",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=cc._renderType===cc.game.RENDER_TYPE_WEBGL?"01WEBGL 模式":"22CANVAS 模式"+t,i=" osVersion"+cc.sys.osVersion,n=" osMainVersion"+cc.sys.osMainVersion;this.mode.string=e+i+n}},{key:"refreshCount",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new CustomEvent;this.count.string=t.detail.counts}}]),c}(),h=F(u.prototype,"menu",[n],{enumerable:!0,initializer:function(){return null}}),f=F(u.prototype,"blockBuilder",[o],{enumerable:!0,initializer:function(){return null}}),d=F(u.prototype,"menuFocusGroup",[r],{enumerable:!0,initializer:function(){return null}}),p=F(u.prototype,"blocksMask",[c],{enumerable:!0,initializer:function(){return null}}),_=F(u.prototype,"mode",[s],{enumerable:!0,initializer:function(){return null}}),g=F(u.prototype,"count",[a],{enumerable:!0,initializer:function(){return null}}),l=u))||l);i.default=A,e.exports=i.default,cc._RF.pop()},{"./BlockBuilder":"BlockBuilder","./Menu":"Menu",SysFocusGroup:"SysFocusGroup",ToggleFocus:"ToggleFocus"}],ImageLoader:[function(t,e,i){"use strict";cc._RF.push(e,"25496IkFeJKFL16k7mUUzh1","ImageLoader");var n=new RegExp("^(?:https?|ftp)://\\S*$","i");cc.Class({ctor:function(){this._id=0,this._maxTask=1,this._timeOut=5,this._connectTimeOut=5},setId:function(t){this._id=t||0},setMaxTask:function(t){this._maxTask=t,cc.sys.os==cc.sys.OS_ANDROID&&jsb.remote_http_setmaxtasks(this._id,t)},setTimeOut:function(t){this._timeOut=t,cc.sys.os==cc.sys.OS_ANDROID&&jsb.remote_http_settimeout(this._id,t)},setConnectTimeOut:function(t){this._connectTimeOut=t,cc.sys.os==cc.sys.OS_ANDROID&&jsb.remote_http_setconnecttimeout(this._id,t)},cancleTasK:function(t,e){t?cc.sys.os==cc.sys.OS_ANDROID&&jsb.remote_http_cancletask(this._id,t):e&&cc.sys.isNative&&cc.textureCache.unbindImageAsync(e)},cancleAllTask:function(){cc.sys.os==cc.sys.OS_ANDROID&&jsb.remote_http_canclealltask(this._id),cc.sys.isNative&&cc.textureCache.unbindAllImageAsync()},loadRemoteImage:function(t,e,i){if(t&&""!=t){if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.remote_http_load_image(this._id,t,e||"",i);if(cc.sys.isNative)return jsb.loadRemoteImg(t,i)}else i&&i(!1)},loadLocalImage:function(t,i){if(t&&""!=t){cc.textureCache._addImageAsync(t,function t(e){e instanceof cc.Texture2D?i&&i(!0,e):i&&i(!1),jsb.unregisterNativeRef(cc.textureCache,t)})}else i&&i(!1)},loadImage:function(t,e,i){return t.match(n)?this.loadRemoteImage(t,e,i):this.loadLocalImage(t,i)},loadSpriteFrame:function(n,t,o){return this.loadImage(n,t,function(t,e){if(t&&e){var i=new cc.SpriteFrame(e);return i.retain(),i.rawUrl=n,void o(t,i)}o(!1,null)})},release:function(t,e){if(clog(">>> _loadSpriteFrame img release start",t),cc.sys.isNative)if(cc.isValid(e)){var i=e.getTexture();cc.isValid(i)?(clog(">>> _loadSpriteFrame img release texture",t),cc.textureCache.removeTexture(i)):cc.textureCache.removeTextureForKey(t),e.clearTexture(),e.release(),cc.isValid(e)&&clog(">>> release cc.isValid(frame)",t),e=null}else cc.textureCache.removeTextureForKey(t);clog(">>> _loadSpriteFrame img release complete",t)}}),cc._RF.pop()},{}],ItemCard:[function(t,e,i){"use strict";cc._RF.push(e,"8994engcCxFF5ewoL624dv/","ItemCard");var n=t("ShaderHelper"),r=t("SpriteFrameManager");cc.Class({extends:t("ToggleFocus"),properties:{titleLabel:{default:null,type:cc.Label},imageSprite:{default:null,type:cc.Sprite},frontSprite:{default:null,type:cc.Sprite},vipStatus:{default:null,type:cc.Node},singleLineNum:10,canMarquee:!0,_extraObj:null,_hasOmitted:!1},setExtraObj:function(t){this._extraObj=t},fixYInScroll:function(t){this._fixYInScroll=t?60:0},getData:function(){return this._itemData},getIndex:function(){return this._itemIndex?this._itemIndex:0},getCardData:function(){return this._itemCard},onConfirm:function(){var t=new cc.Event.EventCustom("click_item_card",!0);t.setUserData({node:this.node,data:this._itemData,extraObj:this._extraObj,index:this._itemIndex,card:this._itemCard}),this.node.dispatchEvent(t)},onGotFocus:function(){this._super(),this._setTitleOpacity(255),this._checkAndStartMarquee()},onLoseFocus:function(){this._super(),this._setTitleOpacity(204),this._checkAndStopMarquee()},setup:function(t,e,i){if(this._isLoadImage=!1,t){var n=t.card,o=t.item?t.item:t;this._itemData=o,this._itemCard=n,this._itemIndex=t.index?t.index:0,this._fixYInScroll=t.useFixYInScoll?60:0,o&&(t.skipName?this.setDisplayName(""):this.setDisplayName(o.baseTitle||""),this._setVipStatus(ModelManager.isVipMedia(o)),this._setDisplayImageState(o.basePic))}else this._itemData=null,this._itemCard=null,this._setDisplayDeerState()},setDisplayName:function(t){if(cc.isValid(this.titleLabel)){var e=/^[A-Za-z ]*$/.test(t)?2:1,i=this.singleLineNum*e;this._hasOmitted=t.length>i;var n=this._hasOmitted?t.substr(0,i-1)+"...":t;this.titleLabel.string=n,this._realTitle=t,this._showTitle=n}},cancelMarqueeAction:function(){this._checkAndStopMarquee(),this._hasOmitted=!1},clean:function(){this._itemData=null,this._itemCard=null,this._isLoadImage=!1,this._setDisplayDeerState()},_setTitleOpacity:function(t){cc.isValid(this.titleLabel)&&(this.titleLabel.node.opacity=t)},_checkAndStartMarquee:function(){var t=this;if(this.canMarquee&&this._hasOmitted){var e=cc.sequence(cc.delayTime(1),cc.callFunc(function(){cc.isValid(t.titleLabel)&&t._startMarquee()}));e.setTag(3002),this.titleLabel.node.runAction(e)}},_startMarquee:function(){var t=this.titleLabel.node,e=t.parent;if(e.addComponent(cc.Mask)){var i=t.getPosition();this.titleLabel.string=this._realTitle;var n=100;this._cloneNode=new cc.Node,this._cloneNode.anchorX=0;var o=this._cloneNode.addComponent(cc.Label);o.font=this.titleLabel.font,o.fontSize=30,o.lineHeight=30,o.string=this._realTitle,this._cloneNode.parent=e,this._cloneNode.setPosition(i.x+t.width+n,i.y);var r=cc.repeatForever(cc.sequence(cc.moveTo((t.width+n)/60,cc.p(i.x-t.width-n,i.y)),cc.moveTo(0,cc.p(i.x+t.width+n,i.y)),cc.moveTo((t.width+n)/60,cc.p(i.x,i.y))));r.setTag(3002),t.runAction(r);var c=cc.repeatForever(cc.sequence(cc.moveTo(2*(t.width+n)/60,cc.p(i.x-t.width-n,i.y)),cc.moveTo(0,cc.p(i.x+t.width+n,i.y))));c.setTag(3002),this._cloneNode.runAction(c)}},_checkAndStopMarquee:function(){if(this.canMarquee&&this._hasOmitted){var t=this.titleLabel.node;t.stopActionByTag(3002);var e=t.parent,i=e.getComponent(cc.Mask);cc.isValid(i)&&(i.destroy(),cc.isValid(this._cloneNode)&&this._cloneNode.destroy(),this.titleLabel.string=this._showTitle,this.titleLabel.node.setPosition(-(e.width/2-5),0))}},_setDisplayDeerState:function(){this._setTitleOpacity(204),this.cancelMarqueeAction(),this.setDisplayName(""),this._setVipStatus(!1),this._setSpriteFrame(null),this._loadSpriteFrame(null),this._setDeerSpriteFrame(!0)},_setDisplayImageState:function(t){var i=this,e=this.imageSprite.node,n=ModelManager.getFinalPic(t,e.width,e.height);ctime("load image start:"+n),this._loadSpriteFrame(n,function(t,e){ctime("load image finish:"+n),e&&(i._isLoadImage=!0,i._setDeerSpriteFrame(!1),i._setSpriteFrame(e)),ctime("load image end:"+n)})},_loadSpriteFrame:function(i,n){var o=this;this._finalPic&&(r.unload(this._finalPic,this._finalCall),this._finalPic=null,this._finalCall=null),i&&(this._finalPic=i,this._finalCall=function(t,e){i==o._finalPic&&n&&n(t,e)},r.loadSpriteFrame(i,this._finalCall))},_setSpriteFrame:function(t,e,i){cc.isValid(this.imageSprite)&&(t?(this.imageSprite.spriteFrame=t,this.imageSprite.node.active=!0,this._setSpriteFrameShader(this.imageSprite)):(this.imageSprite.spriteFrame=null,this.imageSprite.node.active=!1))},_setSpriteFrameShader:function(t){cc.isValid(t)&&n.setGLProgramWithSize(t,"CenterShader")},_setVipStatus:function(t){cc.isValid(this.vipStatus)&&(this.vipStatus.active=t)},_setDeerSpriteFrame:function(t){cc.isValid(this.frontSprite)&&(this.frontSprite.node.active=t)}}),cc._RF.pop()},{ShaderHelper:"ShaderHelper",SpriteFrameManager:"SpriteFrameManager",ToggleFocus:"ToggleFocus"}],ItemCricle:[function(t,e,i){"use strict";cc._RF.push(e,"6a26dO6snhCmKzy88D0yOZK","ItemCricle");var n=t("ShaderHelper"),o=[cc.color(114,191,231),cc.color(241,160,89),cc.color(247,216,94),cc.color(147,109,255)];cc.Class({extends:t("ItemCard"),properties:{bgNode:{default:null,type:cc.Node}},setup:function(t,e,i){if(this._super(t,e,i),cc.isValid(this.bgNode)){var n=e||t&&t.index||0;this.bgNode.color=o[n%4]}},_setSpriteFrameShader:function(t){cc.isValid(t)&&n.setGLProgramWithSize(t,"CenterMaskShader")}}),cc._RF.pop()},{ItemCard:"ItemCard",ShaderHelper:"ShaderHelper"}],ItemList:[function(t,e,i){"use strict";cc._RF.push(e,"221c1HZD/VOTb93kAqBPYk7","ItemList"),cc.Class({extends:t("ItemCard"),properties:{deleteNode:{default:null,type:cc.Node},deleteFocusNode:{default:null,type:cc.Node},deleteNormalNode:{default:null,type:cc.Node},deleteHint:{default:null,type:cc.RichText},blurSprite:{default:null,type:cc.Sprite},_isDeleteMode:!1},setup:function(t,e){this._super(t),cc.isValid(this.deleteHint)&&(this.deleteHint.string="<color=#F9F9F9>按</c><color=#FFB400>OK键</c><color=#F9F9F9>删除该"+(e||"记录")+"</c></color>")},onGotFocus:function(){this._super(),this._isDeleteMode&&(Utils.setNodeActive(this.deleteFocusNode,!0),Utils.setNodeActive(this.deleteNormalNode,!1))},onLoseFocus:function(){this._super(),this._isDeleteMode&&(Utils.setNodeActive(this.deleteFocusNode,!1),Utils.setNodeActive(this.deleteNormalNode,!0))},onConfirm:function(){var t=this._isDeleteMode?"delete_record_one":"click_item_card",e=new cc.Event.EventCustom(t,!0);e.setUserData({data:this._itemData,canDelete:!0}),this.node.dispatchEvent(e)},setDeleteMode:function(t){(this._isDeleteMode=t)?this._onDeleteMode():this._onNormalMode()},_onDeleteMode:function(){Utils.setNodeActive(this.deleteNode,!0),Utils.setNodeActive(this.blurSprite.node,!0)},_onNormalMode:function(){Utils.setNodeActive(this.deleteNode,!1),Utils.setNodeActive(this.blurSprite.node,!1)}}),cc._RF.pop()},{ItemCard:"ItemCard"}],ListLayout:[function(t,e,i){"use strict";cc._RF.push(e,"f966eC6sv5DgojPSb0eLbq3","ListLayout");var r=t("PrefabPoolManager");cc.Class({extends:cc.Component,properties:{content:{default:null,type:cc.Node},average:!1,horizontal:!1,padding_row:0,padding_left:0,padding_right:0,padding_column:0,padding_top:0,padding_bottom:0,margin_row:0,margin_column:0,_groups:[],_offsetX:0,_offsetY:0,_layoutWidth:0,_layoutHeight:0,_contentWidth:0,_contentHeight:0},onLoad:function(){this.refreshLayoutSize()},refreshLayoutSize:function(){0<this.padding_row&&(this.padding_left=this.padding_row,this.padding_right=this.padding_row),0<this.padding_column&&(this.padding_top=this.padding_column,this.padding_bottom=this.padding_column);var t=this.content.width,e=this.content.height;this._offsetX=t*-this.content.anchorX+this.padding_left,this._offsetY=e*(this.content.anchorY-1)+this.padding_top,this._layoutWidth=this._contentWidth=t-this.padding_left-this.padding_right,this._layoutHeight=this._contentHeight=e-this.padding_top-this.padding_bottom},setPaddingLeft:function(t){this.padding_row=0,this.padding_left=t||0,this.refreshLayoutSize()},setPaddingRight:function(t){this.padding_row=0,this.padding_right=t||0,this.refreshLayoutSize()},setPaddingTop:function(t){this.padding_column=0,this.padding_top=t||0,this.refreshLayoutSize()},setPaddingBottom:function(t){this.padding_column=0,this.padding_bottom=t||0,this.refreshLayoutSize()},getContentWidth:function(){return this._contentWidth},getContentHeight:function(){return this._contentHeight},getWidth:function(){return this._layoutWidth+this.padding_left+this.padding_right},getHeight:function(){return this._layoutHeight+this.padding_top+this.padding_bottom},top:function(){if(0<this._groups.length)return this._groups[this._groups.length-1]},pushGroup:function(t){t&&this._groups.push(t)},getGroups:function(){return this._groups},clear:function(){this.clearGroups()},clearGroups:function(){this._groups=[]},push:function(t,e,i,n,o,r){var c={_fixedTop:n||0,_fixedLeft:i||0};if(0<this._groups.length){var s=this._groups[this._groups.length-1];s._infoStart&&s._infoSize&&(this.horizontal?c._infoStart={x:s._infoStart.x+s._infoSize.width,y:s._infoStart.y}:c._infoStart={x:s._infoStart.x,y:s._infoStart.y+s._infoSize.height})}return this._groups.push(c),this._setGroupSizeByPrefab(c,t,o,r),this._setGroupInfo(c,e),this._setLayoutSize(c),c},getItem:function(t,e){if(t&&t._infoSize&&t._infoStart){e=e||0;var i=0,n=0;return this.horizontal?(i=t._infoStart.x+(t._fixedLeft||0)+Math.floor(e/t._infoSize.row)*t._nodeSize.width+this._offsetX,n=t._infoStart.y+(t._fixedTop||0)+e%t._infoSize.row*t._nodeSize.height+this._offsetY):(i=t._infoStart.x+(t._fixedLeft||0)+e%t._infoSize.column*(t._nodeSize.width+t._infoSize.average)+this._offsetX,n=t._infoStart.y+(t._fixedTop||0)+Math.floor(e/t._infoSize.column)*t._nodeSize.height+this._offsetY),{position:cc.p(i+t._nodeSize.x,0-n-t._nodeSize.y),rect:cc.rect(i,n,t._nodeSize.width,t._nodeSize.height)}}},append:function(t,e){if(t){var i=t.count;return this._setGroupInfo(t,i+e),this._formatGroupInfoSize(),i}return 0},split:function(t,e){return t&&(this._setGroupInfo(t,t.count-(e||0)),this._formatGroupInfoSize()),0},resetGroupCount:function(t,e){this._setGroupInfo(t,e),this._formatGroupInfoSize()},_setGroupInfo:function(t,e){if(t){t.count=!e||e<0?0:e,t._infoStart||(t._infoStart={x:0,y:0});var i=0,n=0,o=0;if(this.horizontal){var r=this._contentHeight-(t._fixedTop||0);n=Math.max(1,Math.floor(r/t._nodeSize.height)),i=Math.ceil(t.count/n);this.average&&1<n&&(o=(r-t._nodeSize.height*n)/(n-1))}else{var c=this._contentWidth-(t._fixedLeft||0);i=Math.max(1,Math.floor(c/t._nodeSize.width)),n=Math.ceil(t.count/i);this.average&&1<i&&(o=(c-t._nodeSize.width*i)/(i-1))}t._infoSize={row:n,column:i,average:o,height:n*t._nodeSize.height,width:i*t._nodeSize.width}}else clog("Error !!! invaild group param in  set : ListLayout ")},_setGroupSize:function(t,e){t&&e?t._nodeSize||(t._nodeSize={width:e.width+2*this.margin_row,height:e.height+2*this.margin_column,x:e.width*e.anchorX+this.margin_row,y:e.height*(1-e.anchorY)+this.margin_column}):clog("Error !!! invaild group param in  set : ListLayout ")},_setGroupSizeByPrefab:function(t,e,i,n){if(t&&e){if(!t._nodeSize){var o=r.get(e);t._nodeSize={width:o.width+2*this.margin_row+(i||0),height:o.height+2*this.margin_column+(n||0),x:o.width*o.anchorX+this.margin_row,y:o.height*(1-o.anchorY)+this.margin_column},r.put(o)}}else clog("Error !!! invaild group param in  set : ListLayout ")},_setLayoutSize:function(t){t?(this._layoutWidth=t._infoStart.x+t._infoSize.width,this._layoutHeight=t._infoStart.y+t._infoSize.height):clog("Error !!! invaild group param in  set : _setLayoutSize ")},_formatGroupInfoSize:function(){for(var t=0,e=0,i=0,n=this._groups.length;i<n;i++){var o=this._groups[i];this.horizontal?(o._infoStart.x=t,o._infoStart.y=e,t=o._infoStart.x+o._infoSize.width+(o._fixedLeft||0)):(o._infoStart.x=t,o._infoStart.y=e,e=o._infoStart.y+o._infoSize.height+(o._fixedTop||0)),this._layoutWidth=o._infoStart.x+o._infoSize.width,this._layoutHeight=o._infoStart.y+o._infoSize.height}}}),cc._RF.pop()},{PrefabPoolManager:"PrefabPoolManager"}],ListScrollView:[function(t,e,i){"use strict";cc._RF.push(e,"51d331tCx1HabaWlHDYO4BM","ListScrollView");var v=t("PrefabPoolManager");cc.Class({extends:cc.Component,properties:{scroll:{default:null,type:cc.Node},content:{default:null,type:cc.Node},horizontal:!1,fixScrollX:0,fixScrollY:0,lockScreenY:-1,lockScreenX:-1,_drity:!0,_infos:[],_info_tag:1e3,_info_index:1e3,_displayItems:[]},onLoad:function(){this._pool_put_call=function(){},this._pool_push_call=function(){},this._pool_refesh_call=function(){},this.scrollWidth=this.scroll.width,this.scrollHeight=this.scroll.height,this.scrollOffsetX=-this.scrollWidth*this.scroll.anchorX,this.scrollOffsetY=this.scrollHeight*(1-this.scroll.anchorY),this.lockScreenY<0&&(this.lockScreenY=.5*this.scrollHeight),this.lockScreenX<0&&(this.lockScreenX=.5*this.scrollWidth),this._formatConetenSize()},setPutCall:function(t){this._pool_put_call=t||function(){}},setPushCall:function(t){this._pool_push_call=t||function(){}},setRefreshCall:function(t){this._pool_refesh_call=t||function(){}},setWidth:function(t){this.content.width=t,this._formatConetenSize()},setHeight:function(t){this.content.height=t,this._formatConetenSize()},getScrollFixedX:function(t){return this.fixScrollX},getScrollFixedY:function(t){return this.fixScrollY},getContentSize:function(){return cc.size(this.content.width,this.content.height)},getScrollOffset:function(){return this.horizontal?cc.p(0-this.content.x,0):cc.p(0,this.content.y)},getMaxScrollOffset:function(){return this.horizontal?cc.p(this.content.width-this.scrollWidth,0):cc.p(0,this.content.height-this.scrollHeight)},isAutoScroll:function(){return 0<this.content.getNumberOfRunningActions()},stopAutoScroll:function(){this.content.stopAllActions(),this._autoScrolling&&this.node.emit("scroll-ended"),this._autoScrolling=!1,this._autoScrollTargetDelta=null},scrollToOffset:function(t,e){this._onScrollToOffset(cc.p(-t.x,t.y),e)},getInfos:function(){return this._infos},clear:function(){if(this._drity=!1,this._infos.length=0,this._displayItems){for(var t=this._displayItems.length,e=0;e<t;e++){var i=this._displayItems[e];i.node&&(this._pool_put_call(i.node),v.put(i.node))}this._displayItems=[]}},push:function(t,e,i,n){var o={prefab:t,data:e,position:n,rect:i,tag:this._info_tag++,index:this._info_index++,uuid:t&&t._uuid};return this._drity=!0,this._infos.push(o),o},pop:function(t){if(t)for(var e=t.tag,i=this._infos,n=0,o=i.length;n<o;n++){if(e==i[n].tag){this._drity=!0,i.splice(n,1);break}}},reset:function(t,e,i){if(this._drity=!0,e!=t.data&&(t.data=e),i&&i!=t.rect&&(t.rect=i,this._drity=!0),this._drity){var n=this.getDisplayItemByInfo(t);n&&n.node&&n.node.activeInHierarchy&&(this._pool_put_call(n.node),this._pool_push_call(n.node,t))}},getDisplayItems:function(){return this._displayItems},getDisplayItemsBySort:function(){var t=[];for(var e in this._displayItems){var i=this._displayItems[e];t=t.concat(i.node)}return t},getDisplayItemByInfo:function(t){if(t)for(var e in this._displayItems){var i=this._displayItems[e];if(i&&i.info.tag===t.tag)return i}},getDisplayItemByData:function(t,e){if(t){var i=e||function(t,e){return t===e};for(var n in this._displayItems){var o=this._displayItems[n];if(o&&o.info&&i(t,o.info.data))return o}}},getAndScrollByData:function(t,e){if(t)for(var i=e||function(t,e){return t===e},n=this._infos,o=0,r=n.length;o<r;o++){var c=n[o];if(i(t,c.data))return this.getAndScrollByInfo(c)}},getAndScrollByInfo:function(t){if(t&&t.rect){var e=this.getDisplayItemByInfo(t);return e&&e.node&&e.node.activeInHierarchy||(this.horizontal?this.setScrollOffset(cc.p(-t.rect.x,this.content.y)):this.setScrollOffset(cc.p(this.content.x,t.rect.y)),e=this.getDisplayItemByInfo(t)),e}},splitGroupByLayout:function(t,e,i){cc.isValid(t)&&(this._drity=!0,this._infos.splice(this._infos.length-(i||0)),t.split(e,i),this.setHeight(t.getHeight()))},setPrefabInScroll:function(t,e,i,n,o,r,c){if(cc.isValid(t)&&cc.isValid(e)&&i&&0<i.length){var s=t.push(e,0,0,0,r,c);this.appendPrefabInScroll(t,e,s,i,n,o)}},appendPrefabInScroll:function(t,e,i,n,o,r){if(cc.isValid(t)&&cc.isValid(e)&&i&&n&&0<n.length){for(var c=t.append(i,n.length),s=0,a=n.length;s<a;s++){var l=t.getItem(i,c+s);this.push(e,n[s],cc.rect(l.rect.x,l.rect.y-(r||0),l.rect.width,l.rect.height+(o||0)+(r||0)),l.position)}this.horizontal?this.setWidth(t.getWidth()):this.setHeight(t.getHeight())}},setScrollOffset:function(t,e){this._setScrollOffset(cc.p(-t.x,t.y),e)},scrollToStart:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.3;this.horizontal?this.scrollToOffset(cc.p(0,this.content.y),t):this.scrollToOffset(cc.p(this.content.x,0),t)},setScrollOffsetWithStart:function(){this.horizontal?this._setScrollOffset(cc.p(0,this.content.y)):this._setScrollOffset(cc.p(this.content.x,0))},forceDrawDisplayItems:function(){this._drity=!0,this._onDrawDisplayItems(!0,this.content.x,this.content.y)},focusNodeInScrollView:function(t,e,i){var n=cc.rect(0,i||0,t.width,t.height),o=cc._rectApplyAffineTransformIn(n,t.getNodeToWorldTransform()),r=cc.p(o.x+.5*o.width,o.y+o.height),c=this.content.convertToNodeSpace(r),s=cc.pSub(c,cc.p(.5*this.scroll.width,-(28+.04*t.height))),a=cc.p(s.x+this.fixScrollX,this.content.height-s.y+this.fixScrollY);if(!this.horizontal&&0<=this.lockScreenY&&a.y<this.lockScreenY&&(a.y=0),this.horizontal&&0<=this.lockScreenX&&a.x<this.lockScreenX&&(a.x=0),e)this.setScrollOffset(a,!0);else{var l=this._getSafeOffset(cc.p(-a.x,a.y)),u=cc.p(l.x-this.content.x,l.y-this.content.y),h=cc.pLength(u);this.horizontal&&(h*=2),this.scrollToOffset(a,Math.max(h/2e3,.15),!1)}},_formatConetenSize:function(){this.horizontal?(this.content.anchorX=0,this.content.width=Math.max(this.scrollWidth,this.content.width)):(this.content.anchorY=1,this.content.height=Math.max(this.scrollHeight,this.content.height))},_getSafeOffset:function(t){if(this.horizontal){var e=this.scrollWidth-this.content.width,i=Math.min(Math.max(e,t.x),0);return cc.p(i,this.content.y)}var n=this.content.height-this.scrollHeight,o=Math.min(Math.max(0,t.y),n);return cc.p(this.content.x,o)},_setScrollOffset:function(t,e){this.stopAutoScroll();var i=this._getSafeOffset(t);this.content.x=i.x,this.content.y=i.y,e?this._drity=!0:(this._drity=!1,this._onDrawDisplayItems(!0,i.x,i.y)),i=null},_onScrollToOffset:function(t,e){var i=this;ctime("scroll start"),this.stopAutoScroll();var n=this._getSafeOffset(t);this._autoScrolling=!0,this._autoScrollTargetDelta=cc.p(n.x-this.content.x,n.y-this.content.y),cc.pLength(this._autoScrollTargetDelta)<2?(this.node.emit("scrolling"),this._autoScrolling=!1,this._autoScrollTargetDelta=null,this.node.emit("scroll-ended"),ctime("scroll end")):(this.node.emit("scrolling"),this.content.runAction(cc.sequence(cc.moveTo(e||0,n),cc.callFunc(function(){i._autoScrolling=!1,i._autoScrollTargetDelta=null,i._forceScrollOffset(),i.node.emit("scroll-ended"),ctime("scroll end")}))))},_forceScrollOffset:function(){this.stopAutoScroll(),this._onDrawDisplayItems(!1,this.content.x,this.content.y)},_onDrawDisplayItems:function(t,e,i){var n=!0,o=t||!this._contentPosition;this._contentPosition?(o||(2<Math.abs(e-this._contentPosition.x)||2<Math.abs(i-this._contentPosition.y))&&(o=!0),n=e>this._contentPosition.y||i>this._contentPosition.x):this._contentPosition=cc.p(e,i),o&&(this._contentPosition.x=e,this._contentPosition.y=i,this._drawItemsByList(e,i,n))},_drawItemsByList:function(t,e,i){for(var n=cc.rect(this.scrollOffsetX-t,this.scrollOffsetY+e,this.scrollWidth,this.scrollHeight),o=[],r=this._infos,c=0,s=r.length;c<s;c++){var a=r[c];cc.rectIntersectsRect(n,a.rect)&&o.push({info:a,node:null})}var l=!1,u=this._displayItems,h=u.length;for(c=0,s=o.length;c<s;c++)for(var f=o[c],d=0;d<h;d++){if((y=u[d]).node&&f.info.uuid==y.info.uuid&&f.info.tag==y.info.tag){f.node=y.node,y.node=null;break}}for(c=0,s=o.length;c<s;c++){if(!(f=o[c]).node){var p=!1;for(d=0;d<h;d++){if((y=u[d]).node&&f.info.uuid==y.info.uuid&&(i&&f.info.index>y.info.index||!i&&f.info.index<y.info.index)){l=!0,f.node=y.node,f.node.tag=f.info.tag,f.node.zIndex=f.info.index,f.node.x=f.info.position.x,f.node.y=f.info.position.y,p=!0,y.node=null,this._pool_put_call(f.node),this._pool_push_call(f.node,f.info);break}}if(!p){l=!0;var _=v.get(f.info.prefab);f.node=_,f.node.tag=f.info.tag,f.node.zIndex=f.info.index,f.node.x=f.info.position.x,f.node.y=f.info.position.y,this.content.addChild(f.node),this._pool_push_call(f.node,f.info)}}}for(var g=0;g<h;g++){var y;(y=u[g]).node&&(this._pool_put_call(y.node),v.put(y.node))}this._displayItems=o,l&&this._pool_refesh_call(this._displayItems)},update:function(t){(this._drity||this._autoScrolling)&&(this._onDrawDisplayItems(this._drity,this.content.x,this.content.y),this._drity=!1)}}),cc._RF.pop()},{PrefabPoolManager:"PrefabPoolManager"}],MenuButton:[function(t,e,i){"use strict";cc._RF.push(e,"c89daUIVpVAX6S7C3yhtM1z","MenuButton"),Object.defineProperty(i,"__esModule",{value:!0});var n,o,r,h,c=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s,a,l,u,d,p,_=t("ToggleFocus"),g=cc._decorator,y=g.ccclass,v=(n=(0,g.property)(cc.Label),y((r=function(t){function u(){var t,e,i,n,o,r,c;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return i=f(this,(t=u.__proto__||Object.getPrototypeOf(u)).call.apply(t,[this].concat(a))),o="label",c=n=e=i,(r=h)&&Object.defineProperty(n,o,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(c):void 0}),f(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,_),c(u,[{key:"setup",value:function(t){var e=t.text,i=void 0===e?"":e,n=t.onConfirm,o=void 0===n?function(){}:n;this.label.string=i,this.onConfirmCall=o}},{key:"onConfirm",value:function(){this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.2,.85),cc.scaleTo(.2,1.18),cc.scaleTo(.2,1))),this.onConfirmCall()}}]),u}(),s=r.prototype,a="label",l=[n],u={enumerable:!0,initializer:function(){return null}},p={},Object.keys(u).forEach(function(t){p[t]=u[t]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(t,e){return e(s,a,t)||t},p),d&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(d):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(s,a,p),p=null),h=p,o=r))||o);i.default=v,e.exports=i.default,cc._RF.pop()},{ToggleFocus:"ToggleFocus"}],Menu:[function(t,e,i){"use strict";cc._RF.push(e,"c2c54kvqNJCLZ2o5vBpMpYv","Menu"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,o,r,c,s,a,l,u=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),h=t("./MenuButton"),f=(l=h)&&l.__esModule?l:{default:l};function d(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _(i,n,t,e,o){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce(function(t,e){return e(i,n,t)||t},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(i,n,r),r=null),r}var g=t("SimpleLayout"),y=cc._decorator,v=y.ccclass,m=y.property,S=(n=m(cc.Prefab),o=m(g),v((c=function(t){function c(){var t,e,i;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,c);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return d(e=i=p(this,(t=c.__proto__||Object.getPrototypeOf(c)).call.apply(t,[this].concat(o))),"menuBtn",s,i),d(i,"simpleLayout",a,i),p(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,cc.Component),u(c,[{key:"setup",value:function(t){var i=this;t.map(function(t){var e=cc.instantiate(i.menuBtn);i.node.addChild(e),e.getComponent(f.default).setup(t),i.simpleLayout.addItem(e)})}}]),c}(),s=_(c.prototype,"menuBtn",[n],{enumerable:!0,initializer:function(){return null}}),a=_(c.prototype,"simpleLayout",[o],{enumerable:!0,initializer:function(){return null}}),r=c))||r);i.default=S,e.exports=i.default,cc._RF.pop()},{"./MenuButton":"MenuButton",SimpleLayout:"SimpleLayout"}],MerryGoScroll:[function(t,e,i){"use strict";cc._RF.push(e,"5d883yB0h9J/5WssmaVTLhi","MerryGoScroll");var n=t("ListLayout"),o=t("ListScrollView");cc.Class({extends:cc.Component,properties:{layout:{default:null,type:n},scroll:{default:null,type:o},prefab:{default:null,type:cc.Prefab},_selectIndex:0,_scrollData:[],_refreshCall:null},onEnable:function(){var n=this;cc.isValid(this.scroll)&&(this.scroll.setPutCall(function(t){n.onSafeCall(t,"ToggleInfoFocus",function(t){t.clean()})}),this.scroll.setPushCall(function(t,i){n.onSafeCall(t,"ToggleInfoFocus",function(t){var e=i&&i.data;e&&t.setup(e.itemdata,e.index)})}),this.scroll.setRefreshCall(function(){n._merryGoScrollRefresh()}),this.scroll.node.on("scrolling",function(){n._merryGoScrollRefresh()})),this.node.on("toggle_info_index",function(t){var e=t.getUserData(),i=e&&e.data;null!=i&&(n._selectIndex=i||0)}),this.node.on("toggle_info_click",function(t){if(n._merryGoClickCall){var e=t.getUserData(),i=e&&e.data;null!=i&&n._merryGoClickCall(i,n.getSelectIndex(),n.getSelectData())}})},onDisable:function(){this.node.off("toggle_info_index"),this.node.off("toggle_info_click"),cc.isValid(this.scroll)&&(this.scroll.setPutCall(null),this.scroll.setPushCall(null),this.scroll.setRefreshCall(null),this.scroll.node.off("scroll-ended"))},onSafeCall:function(t,e,i){if(cc.isValid(t)){var n=t.getComponent(e);cc.isValid(n)&&i(n)}},setMerryGoRefreshCall:function(t){this._merryGoRefreshCall=t||function(){}},setMerryGoClickCall:function(t){this._merryGoClickCall=t||function(){}},getSelectIndex:function(){return this._selectIndex},getSelectData:function(){var t=this._scrollData[this._selectIndex];if(t)return t.itemdata},setup:function(t){var e=t||[];this._scrollData=[];for(var i=0;i<e.length;i++)this._scrollData.push({index:i,itemdata:e[i]});this._selectIndex=0,this.scroll.setPrefabInScroll(this.layout,this.prefab,this._scrollData,0)},clean:function(t){this.layout.clear(),this.scroll.clear()},scrollByIndex:function(t){this._selectIndex=t||0;var e=this.scroll.getAndScrollByData(this._scrollData[this._selectIndex]);if(e&&e.node)return this.scroll.focusNodeInScrollView(e.node,!0),this._merryGoScrollRefresh(),e},_merryGoScrollRefresh:function(){this._merryGoRefreshCall&&this._merryGoRefreshCall(this.scroll.getDisplayItems(),this.getSelectIndex(),this.getSelectData())}}),cc._RF.pop()},{ListLayout:"ListLayout",ListScrollView:"ListScrollView"}],NetImage:[function(t,e,i){"use strict";cc._RF.push(e,"aa7a3jztK1LpqbqJyzAlZ7N","NetImage"),Object.defineProperty(i,"__esModule",{value:!0});var n,o,r,h,c=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s,a,l,u,d,p,_=cc._decorator,g=_.ccclass,y=_.property,v="http://pic1.ptqy.gitv.tv/common/lego/20180309/a889f0cdfd7f4985b29887e3b6e63cbb.png",m=(n=y(cc.Sprite),g((r=function(t){function u(){var t,e,i,n,o,r,c;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return i=f(this,(t=u.__proto__||Object.getPrototypeOf(u)).call.apply(t,[this].concat(a))),o="image",c=n=e=i,(r=h)&&Object.defineProperty(n,o,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(c):void 0}),f(i,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,cc.Component),c(u,[{key:"onLoad",value:function(){var i=this;cc.sys.isNative||(v="http://10.4.146.207:4000/getImage?url="+v),cc.loader.load(v,function(t,e){e&&cc.isValid(i.image)&&(i.image.spriteFrame=new cc.SpriteFrame(e))})}}]),u}(),s=r.prototype,a="image",l=[n],u={enumerable:!0,initializer:function(){return null}},p={},Object.keys(u).forEach(function(t){p[t]=u[t]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=l.slice().reverse().reduce(function(t,e){return e(s,a,t)||t},p),d&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(d):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(s,a,p),p=null),h=p,o=r))||o);i.default=m,e.exports=i.default,cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"134ebxiacRB+ZvL1//e7CD9","Player");var n=t("SysEvent");cc.Class({extends:cc.Component,properties:{canva:{default:null,type:cc.Node},enenyLaunch:{default:null,type:cc.Node},bullet:{default:null,type:cc.Prefab},event:{default:null,type:n},followSpeed:0},onLoad:function(){var n=this;n.moveToPos=cc.p(0,0),n.isMoving=!1,n.isMovingGap=null,cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,e){var i=t.getLocation();return n.isMoving=!0,n.moveToPos=n.canva.convertToNodeSpaceAR(i),cc.log(this,"click"),!0},onTouchMoved:function(t,e){var i=t.getLocation();n.moveToPos=n.canva.convertToNodeSpaceAR(i)},onTouchEnded:function(t,e){n.isMoving=!1}},n.node),this.event.on(cc.SystemEvent.EventType.KEY_UP,function(t){switch(t.keyCode){case cc.KEY.f4:break;case cc.KEY.left:case cc.KEY.dpadLeft:n.isMovingGap=cc.p(-10,0),t.stopPropagation();break;case cc.KEY.right:case cc.KEY.dpadRight:n.isMovingGap=cc.p(10,0),t.stopPropagation();break;case cc.KEY.up:case cc.KEY.dpadUp:n.isMovingGap=cc.p(0,10),t.stopPropagation();break;case cc.KEY.down:case cc.KEY.dpadDown:n.isMovingGap=cc.p(0,-10),t.stopPropagation();break;case cc.KEY.enter:case cc.KEY.dpadCenter:}}),this.schedule(function(){this.launchBullet()},.1)},launchBullet:function(){var t=cc.instantiate(this.bullet);t.parent=this.canva,t.setPosition(this.node.position),t.getComponent("Bullet").enenyLaunch=this.enenyLaunch},update:function(t){if(!this.isMoving){if(!this.isMovingGap)return;this.moveToPos.x=this.moveToPos.x+this.isMovingGap.x,this.moveToPos.y=this.moveToPos.y+this.isMovingGap.y,this.isMovingGap=null}this.node.setPosition(this.moveToPos)}}),cc._RF.pop()},{SysEvent:"SysEvent"}],PrefabLoader:[function(t,e,i){"use strict";cc._RF.push(e,"48af0Dyv5ROO5u8/kHASv2o","PrefabLoader");var o=t("PrefabParser"),n={strogeCache:{},strogeResCache:{},load:function(t,e){if(clog("load >>>>> start path "),t){var i=this._getPrefab(t);if(i)return clog("load >>>>> callback(null, prefab)  ",t),void(e&&e(null,i));clog("load >>>>> start _checkAndStartLoadUrl  ",t),this._checkAndStartLoadUrl(t,e)}else e&&e&&e("PrefabLoader.loadPrefab invaild url",null)},loadPrefabByPage:function(t,e){this.load(this._getPagePath(t),e)},unload:function(t){var e=this._getUrl(t),i=e&&this.strogeCache[e];if(i&&i.url){var n=this._getPrefab(t);n&&o.disInstantiate(n),delete this.strogeCache[e],this._releaseStrogeCache(cc.loader.getDependsRecursively(i.url))}},unloadByPage:function(t){this.unload(this._getPagePath(t))},unloadByPrefab:function(t){for(var e in this.strogeCache){var i=this.strogeCache[e];if(i&&t==i.prefab){this.unload(i.path);break}}},retainScene:function(t){if(t){var e=t.dependAssets;this._retainStrogeCache(e)}},retainAsset:function(t){t&&this._retainStrogeCache(cc.loader.getDependsRecursively(t))},_getUrl:function(t){return t},_getPagePath:function(t){return t&&"prefabs/page/"+t},_getPrefab:function(t){var e=this._getUrl(t),i=e&&this.strogeCache[e];return i&&i.prefab},_checkAndStartLoadUrl:function(i,n){var o=this,r=this._getUrl(i);cc.loader.loadRes(r,function(t,e){t?n&&n(t,null):(o.strogeCache[r]={path:i,url:r,prefab:e},o._retainStrogeCache(cc.loader.getDependsRecursively(r)),n&&n(null,e))})},_retainStrogeCache:function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n){var o=this.strogeResCache[n];o||(o=0),this.strogeResCache[n]=o+1}}},_releaseStrogeCache:function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n){var o=this.strogeResCache[n];o&&1<o?this.strogeResCache[n]=o-1:(cc.loader.release(n),this.strogeResCache[n]=null)}}},dumpCacheInfo:function(){for(var t in this.strogeCache){var e=this.strogeCache[t];e&&clog(e.url)}}};e.exports=n,cc._RF.pop()},{PrefabParser:"PrefabParser"}],PrefabParser:[function(require,module,exports){"use strict";cc._RF.push(module,"43e96woJdlDCZ+OVaBaNcox","PrefabParser");var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function CreterParser(data,parser){var _parser_objs=[],_parser_funcs=[],_parser_value=[],kv,lv,mv;function escapeForJS(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function cleanEval(code){return eval(code)}function getClassName(t){var e=cc.js.getClassName(t),i=-1!==e.indexOf(".");if(i)try{if(i=t===cleanEval(e))return e}catch(t){}var n=_parser_funcs.indexOf(t);return n<0&&(n=_parser_funcs.length,_parser_funcs.push(t)),"(F["+n+"])"}function getObjName(t){var e=_parser_objs.indexOf(t);return e<0&&(e=_parser_objs.length,_parser_objs.push(t)),"O["+e+"]"}function getValueIndexName(t){if(t._Ms$ParserIndex)return t._Ms$ParserIndex;var e="vv"+(_parser_value.length+1);return t._Ms$ParserIndex=e,_parser_value.push(t),e}function getNewValueTypeCode(t){var e,i=cc.js.getClassName(t),n=t.constructor,o="new "+i+"(";if(n===cc.Mat3||n===cc.Mat4){var r=t.data;for(e=0;e<r.length;e++)o+=r[e],e<r.length-1&&(o+=",")}else for(e=0;e<n.__props__.length;e++){var c=t[n.__props__[e]];if("object"===(void 0===c?"undefined":_typeof(c)))return cc.errorID(3641,i),"new "+i+"()";o+=c,e<n.__props__.length-1&&(o+=",")}return o+")"}function write(t,e){t.push(e)}function writeFeild(t,e,i){write(t,"o."),write(t,e),write(t,"="),i(t),write(t,";")}function writeAttri(t,e,i){writeFeild(t,e,function(t){write(t,i)})}function checkDefaultValue(t,e){if("function"==typeof t)try{t=t()}catch(t){return!1}if(t===e)return!0;if(t&&e){if(t instanceof cc.ValueType&&t.equals(e))return!0;if(Array.isArray(t)&&Array.isArray(e)||t.constructor===Object&&e.constructor===Object)try{return JSON.stringify(t)===JSON.stringify(e)}catch(t){}}return!1}function writeProperty(t,e,i,n){if("_sgNode"!=e&&"uuid"!=e){if("object"==(void 0===i?"undefined":_typeof(i))){if(i instanceof cc.ValueType)return writeAttri(t,e,getNewValueTypeCode(i));if(i instanceof cc.Asset||i instanceof cc.AudioSource||i instanceof cc.SpriteFrame)return writeAttri(t,e,getObjName(i));var o=i.constructor;return cc.Class._isCCClass(o)?(i instanceof cc._BaseNode||i instanceof cc.Component)&&i._Ms$ParserIndex?writeAttri(t,e,getValueIndexName(i)):writeFeild(t,e,function(t){writeObject(t,i,writeNode)}):o===Array?writeArray(t,e,i):o===Object?writeAttri(t,e,escapeForJS(i)):writeAttri(t,e,getObjName(i))}return"function"==typeof i?writeAttri(t,e,getClassName(i)):"string"==typeof i?writeAttri(t,e,escapeForJS(i)):"boolean"==typeof i||"number"==typeof i?("_objFlags"==e&&(i&=cc.Object.Flags.PersistentMask),writeAttri(t,e,i)):void 0}}function writeArray(t,e,i){if(0<i.length){writeFeild(t,e,function(t){write(t,"new Array("),write(t,i.length),write(t,")")});for(var n=0;n<i.length;n++){var o=i[n];o?o._Ms$ParserIndex?writeFeild(t,e+"["+n+"]",function(t){write(t,"(function (parent) {"),write(t,"var o = "+getValueIndexName(o)+";"),"_components"==e&&writeAttri(t,"node","parent"),"_children"==e&&writeAttri(t,"_parent","parent"),write(t,"return o;"),write(t,"})(o)")}):o instanceof cc.Asset?writeAttri(t,e+"["+n+"]",getObjName(o)):writeFeild(t,e+"["+n+"]",function(t){writeObject(t,o,writeNode)}):writeAttri(t,e+"["+n+"]","null")}}}function writeObject(t,e,i){var n=e.constructor,o=getValueIndexName(e);write(t,"(function (parent) {"),write(t,"var o = "+o+" = new "),write(t,getClassName(n)),write(t,"();"),i(t,e),write(t,"return o;"),write(t,"})(o)")}function writeNode(t,e,i){var n=e.constructor;if(n&&n!==Object){var o=n.__props__,r=cc.Class.Attr.getClassAttrs(n);if(o)for(var c=0;c<o.length;c++){var s=o[c],a=e[s];null==a||checkDefaultValue(r[s+cc.Class.Attr.DEFAULT],a)||writeProperty(t,s,a,i)}}}function writeModule(t,e){write(t,"(function (parent) {"),write(t,"var o = "+getClassName(value)+";"),writeNode(t,e),write(t,"return new cc.Node();"),write(t,"})(o)")}function writePrefab(t){var e=[];write(e,"var o = "+getValueIndexName(t)+" = new cc.Node();"),writeNode(e,t),write(e,"return o;"),write(e,"})");for(var i=["var vv0"],n=0;n<_parser_value.length;n++)i.push(",vv"+(n+1)),_parser_value[n]._Ms$ParserIndex=null;return i.push(";"),"(function (O, F, R) {"+i.join("")+e.join("")}return kv=writePrefab(data),lv=_parser_objs,mv=_parser_funcs,{objs:lv,foo:cleanEval(kv).bind(null,lv,mv)}}var PrefabParser={_prefabCompile:{},_classAttrCache:{},clear:function(t){},compile:function(t){if(t&&t.data&&t.data._prefab&&t.data._prefab.fileId){var e=t.data._prefab.fileId,i=this._prefabCompile[e];if(i){var n=i.creater;if(i.prefab!=t)for(var o=n.objs,r=cc.loader,c=0;c<o.length;c++){var s=r._getReferenceKey(o[c]),a=r.getItem(s);o[c]=a&&a.content}return n.foo}n=CreterParser(t.data,this);return this._prefabCompile[e]={prefab:t,creater:n},n.foo}clog("Error !! prefab data is invaild !  compile : PrefabParser")},instantiate:function(t){return cc.instantiate(t)},disInstantiate:function(t){0}};module.exports=PrefabParser,cc._RF.pop()},{}],PrefabPoolManager:[function(t,e,i){"use strict";cc._RF.push(e,"206a3Oz4F1KkbuEztjdPqKA","PrefabPoolManager");var c=t("PrefabParser"),o=t("PrefabLoader"),n={_prefabPoolMap:{},_getPool:function(t){if(t)return this._prefabPoolMap[t]},_getAndCreaterPool:function(t){if(t){var e=this._prefabPoolMap[t];return e||(e=new cc.NodePool,this._prefabPoolMap[t]=e),e}clog("Error!!! no pool uuid _getAndCreaterPool : PrefabPoolManager")},_getPrefabId:function(t){if(t&&t.data&&t.data._prefab&&t.data._prefab)return t.data._prefab.fileId;clog("Error!!! this prefab has no prefabInfo in _getPrefabId : PrefabPoolManager")},_getPrefabIdByInstantiate:function(t){if(t._prefab&&t._prefab)return t._prefab.fileId;clog("Error!!! this node has no prefabInfo in _getPrefabIdByInstantiate : PrefabPoolManager")},fill:function(t,e){for(var i=this._getAndCreaterPool(this._getPrefabId(t)),n=i.size();n<e;++n)i.put(c.instantiate(t))},fillAsync:function(e,t,i){for(var n=this._getAndCreaterPool(this._getPrefabId(e)),o=[],r=n.size();r<t;++r)o.push(function(t){n.put(c.instantiate(e)),t(null)}),o.push(function(t){setTimeout(function(){t(null)},0)});async.series(o,function(t,e){i&&i()})},get:function(t,e){var i=this._getPool(this._getPrefabId(t)),n=null;return i&&0<i.size()&&(n=i.get(e))&&(n.scaleX=1,n.scaleY=1,n.active=!0),n||(n=c.instantiate(t),o.retainAsset(t)),n},put:function(t){t&&t._prefab?(t.stopAllActions(),t.active=!1,this._getAndCreaterPool(this._getPrefabIdByInstantiate(t)).put(t)):clog("Error!!! no prefab info in node : PrefabPool.put")},clear:function(t){var e=this._getPool(this._getPrefabId(t));e&&e.clear()},clearAll:function(){_.each(this._prefabPoolMap,function(t,e){t.clear()}),this._prefabPoolMap={}}};e.exports=n,cc._RF.pop()},{PrefabLoader:"PrefabLoader",PrefabParser:"PrefabParser"}],SearchHelper:[function(t,e,i){"use strict";function o(t){return t?"string"==typeof t?JS.getClassByName(t):t:(cc.errorID(3804),null)}function c(t,e,i){for(var n=0;n<t._components.length;++n){var o=t._components[n];o instanceof e&&i.push(o)}}cc._RF.push(e,"617a0Fn49BNfLzeU8oUQ2C4","SearchHelper");var n={isContain:function(t,e){return!(!t||!e)&&e.isChildOf(t)},instanceof:function(t,e){return t instanceof o(e)},getComponentByFather:function(t,e){return function(t,e){for(var i=t;i;){for(var n=i._components,o=0;o<n.length;++o){var r=n[o];if(r instanceof e)return r}i=i.parent}}(t,o(e))},getComponentsInChildren:function(t,e){var i=o(e),n=[];return i&&(c(t,i,n),function t(e,i,n){for(var o=0;o<e.length;++o){var r=e[o];c(r,i,n),0<r._children.length&&t(r._children,i,n)}}(t._children,i,n)),n}};e.exports=n,cc._RF.pop()},{}],ShaderHelper:[function(t,e,i){"use strict";cc._RF.push(e,"b7f0eKNsgRH6p2+Vn4fBh9L","ShaderHelper");var n={ShaderArray:{SpriteShader:{frag:null,vert:null,setUniformsByProgramState:null,setUniformsByShaderProgram:null},GreyShader:{frag:"varying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\n   vec4 col = texture2D(CC_Texture0, v_texCoord);\n   float grey = dot(col.rgb, vec3(0.299, 0.587, 0.114));\n   gl_FragColor = vec4(grey, grey, grey, col.a);\n}",vert:null,setUniformsByProgramState:null,setUniformsByShaderProgram:null},CenterShader:{frag:"varying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nuniform float u_edge_x;\nuniform float u_edge_y;\nuniform float u_edge_fade;\nfloat pow2f(float v) {\n   return v * v;\n}\nvoid main()\n{\n\tvec2 uv = vec2(abs(v_texCoord.x-0.5),abs(v_texCoord.y-0.5));\n\tfloat rx = uv.x - u_edge_x;\n\tfloat ry = uv.y - u_edge_y;\n\tfloat nx = step(u_edge_x,uv.x);\n\tfloat ny = step(u_edge_y,uv.y);\n\tfloat s = sqrt(pow2f(rx/(0.5-u_edge_x)) + pow2f(ry/(0.5-u_edge_y)));\n\tfloat d = nx*ny*step(1.0,s);\n\tfloat e = (1.0 + u_edge_fade - s )/u_edge_fade;\n\tfloat f = d * (e * 0.6 + 0.4) * step(s, 1.0 + u_edge_fade);\n\tgl_FragColor = (1.0- d + f) * v_fragmentColor * texture2D( CC_Texture0,v_texCoord);\n}",vert:null,setUniformsByProgramState:function(t,e){if(t&&cc.isValid(e)){var i=.5,n=.5,o=1,r=e.spriteFrame;if(cc.isValid(r))r.getTexture()&&(i=.5-15/e.node.width,n=.5-15/e.node.height,o=.2);t.setUniformFloat("u_edge_x",i),t.setUniformFloat("u_edge_y",n),t.setUniformFloat("u_edge_fade",o)}},setUniformsByShaderProgram:function(t,e){}},CenterShadowShader:{frag:"varying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nuniform float u_edge;\nuniform float u_offset; \n\nvec4 composite(vec4 over, vec4 under)\n{\n\treturn over + (1.0 - over.a)*under;\n}\n\nvoid main()\n{\t\n\tfloat edge = u_edge;\n\tfloat offset = u_offset;\n\t\n\tfloat dis = 0.0;\n\tvec2 texCoord = vec2(0.5 + (v_texCoord.x - 0.5) * ((offset*2.0) + 1.0), 0.5 + (v_texCoord.y - 0.5) * ((offset*2.0) + 1.0)); \n\tif ( texCoord.x < edge )\n\t{\n\t\tif ( texCoord.y < edge )\n\t\t{\n\t\t\tdis = distance( texCoord, vec2(edge, edge) );\n\t\t}\n\t\tif ( texCoord.y > (1.0 - edge) )\n\t\t{\n\t\t\tdis = distance( texCoord, vec2(edge, (1.0 - edge)) );\n\t\t}\n\t}\n\telse if ( texCoord.x > (1.0 - edge) )\n\t{\n\t\tif ( texCoord.y < edge )\n\t\t{\n\t\t\tdis = distance( texCoord, vec2((1.0 - edge), edge ) );\n\t\t}\n\t\tif ( texCoord.y > (1.0 - edge) )\n\t\t{\n\t\t\tdis = distance( texCoord, vec2((1.0 - edge), (1.0 - edge) ) );\n\t\t}\n\t}\n\t\n\tif(dis > 0.001)\n\t{\n\t\n\t\tfloat gap = edge * 0.1;\n\t\tif(dis <= edge - gap)\n\t\t{\n\t\t\tgl_FragColor = v_fragmentColor * texture2D( CC_Texture0,texCoord);\n\t\t}\n\t\telse if(dis <= edge)\n\t\t{\n\t\t\tgl_FragColor = composite(v_fragmentColor * texture2D( CC_Texture0,texCoord) * (gap - (dis - edge + gap))/gap,vec4( 0.0, 0.0, 0.0,0.4));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.4* (offset - (dis - edge))/offset);\n\t\t}\n\t}\n\telse\n\t{\n\t\t\n\t\tfloat absX = abs(texCoord.x - 0.5);\n\t\tif(absX > 0.5)\n\t\t{\n\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 0.4* (offset - (absX - 0.5))/offset);\n\t\t}\n\t\telse \n\t\t{\n\t\t\tfloat absY = abs(texCoord.y - 0.5);\n\t\t\tif (absY > 0.5){\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0,0.4*(offset - (absY - 0.5))/offset);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tgl_FragColor =  v_fragmentColor * texture2D( CC_Texture0,texCoord);\n\t\t\t}\n\t\t}\n\t}\n}",vert:null,setUniformsByProgramState:function(t){t&&(t.setUniformFloat("u_edge",.05),t.setUniformFloat("u_offset",.05))},setUniformsByShaderProgram:function(t){t&&(t.setUniformLocationWith1f(t.getUniformLocationForName("u_edge"),.05),t.setUniformLocationWith1f(t.getUniformLocationForName("u_offset"),.05))}},ccGraphicsShader:{frag:"varying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nuniform float strokeMult;\nuniform vec4 color;\nfloat strokeMask() {\n   return min(1.0, (1.0-abs(v_texCoord.x*2.0-1.0))*strokeMult) * min(1.0, v_texCoord.y);\n }\nvoid main(void)\n{\n    float strokeAlpha = v_fragmentColor.a * strokeMask();\n    gl_FragColor = vec4(color.rgb, color.a * strokeAlpha);\n}",vert:"attribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\ngl_Position = CC_MVPMatrix * a_position;\nv_fragmentColor = a_color;\nv_texCoord = a_texCoord;\n}",setUniformsByProgramState:function(t){},setUniformsByShaderProgram:function(t){}},CenterMaskShader:{frag:"precision mediump float;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nfloat pow2f(float v) {\n   return v * v;\n}\nvoid main()\n{\n\tvec2 uv = vec2(abs(v_texCoord.x-0.5),abs(v_texCoord.y-0.5));\n   float pa = 0.0;\n   float pb = 0.0;\n   if (v_texCoord.y == 0.5) {\n       pa = 1.0;\n       pb = 0.0;\n   } else {\n\t    pa = step(v_texCoord.y,0.5);\n\t    pb = step(0.5,v_texCoord.y);\n   }\n\tfloat s = sqrt(pow2f(uv.x) + pow2f(uv.y));\n\tgl_FragColor = (pa + step(s,0.5) * pb) * v_fragmentColor * texture2D( CC_Texture0,v_texCoord);\n}",vert:null,setUniformsByProgramState:function(t,e){},setUniformsByShaderProgram:function(t,e){}}},glProgramCache:{},setGLProgram:function(t,e){var i=this.ShaderArray[e];null!=i?this.setGLProgramShader(t,i,e):cc.log("%s shader is nil",e)},setGLProgramWithSize:function(t,e){var i=this.ShaderArray[e];null!=i?this.setGLProgramShader(t,i,e+"_"+t.node.width+"_"+t.node.height):cc.log("%s shader is nil",e)},setGLProgramShader:function(t,e,i){var n=this.createWithGLProgram(e,i);if(cc.sys.isNative){var o=cc.GLProgramState.getOrCreateWithGLProgram(n);t._sgNode.setGLProgramState(o),e.setUniformsByProgramState&&e.setUniformsByProgramState(o,t)}else e.setUniformsByShaderProgram&&e.setUniformsByShaderProgram(n,t),t._sgNode.setShaderProgram(n)},createWithGLProgram:function(t,e){if(!(i=cc.shaderCache.getProgram(e))){var i,n=t.frag,o=t.vert;(i=new cc.GLProgram).initWithString(null==o?"attribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\ngl_Position = CC_PMatrix * a_position;\nv_fragmentColor = a_color;\nv_texCoord = a_texCoord;\n}":o,null==n?"varying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\nNaN}":n),i.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),i.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),i.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS),i.link(),i.updateUniforms(),cc.shaderCache.addProgram(i,e)}return i}};e.exports=n,cc._RF.pop()},{}],SimpleLayout:[function(t,e,i){"use strict";cc._RF.push(e,"61ba6CJcu1EraLzzyvxns/R","SimpleLayout"),cc.Class({extends:cc.Component,properties:{content:cc.Node,horizontal:!1,needOmitted:!1,spacing:0,_nowPosition:null,_lastItem:null,_nowShowSize:0},addItem:function(t){return this._checkNeedOmit(t)?(t.destroy(),!1):(this._updatePosition(t),t.setPosition(this._nowPosition.x,this._nowPosition.y),!0)},getPosition:function(){return this._nowPosition?this._nowPosition:{x:0,y:0}},resetLayout:function(){this._nowPosition=null,this._nowShowSize=0},_initPosition:function(t){var e=(0-this.content.anchorX)*this.content.width-(0-t.anchorX)*t.width,i=(1-this.content.anchorY)*this.content.height-(1-t.anchorY)*t.height;this._nowPosition={x:e,y:i}},_updatePosition:function(t){this._nowPosition?this.horizontal?this._nowPosition.x+=.5*(t.width+this._lastItem.width)+this.spacing:this._nowPosition.y-=.5*(t.height+this._lastItem.height)+this.spacing:this._initPosition(t),this._lastItem=t},_checkNeedOmit:function(t){if(this.needOmitted){var e=void 0,i=void 0;if(this.horizontal?(e=this._nowShowSize+t.width+this.spacing,i=this.node.width):(e=this._nowShowSize+t.height+this.spacing,i=this.node.height),e>i+this.spacing)return!0;this._nowShowSize=e}return!1}}),cc._RF.pop()},{}],SpriteAnimator:[function(t,e,i){"use strict";cc._RF.push(e,"32c92F2x2RDHIAUtN8vLABi","SpriteAnimator"),cc.Class({extends:cc.Component,properties:{playOnLoad:!1,isAutoRelease:!1,nameClips:{default:[],type:[cc.String]},_isCheckStart:!1,_animationScript:null},onLoad:function(){var t=this.getComponent(cc.Animation);cc.isValid(t)||(t=this.addComponent(cc.Animation)),this._animationScript=t},onEnable:function(){cc.isValid(this._animationScript)&&this._animationScript.on("finished",this._onCheckAutoRelase,this),this._onStartWhenLoad()},onDisable:function(){cc.isValid(this._animationScript)&&this._animationScript.off("finished")},onDestroy:function(){cc.isValid(this._animationScript)&&(this.unloadClips(),this._animationScript=null)},playAsyn:function(t,e){var i=this,n=t||this.nameClips[0];this.loadClip(n,function(t){cc.isValid(i._animationScript)&&t&&i._animationScript.play(n,e)})},stop:function(){cc.isValid(this._animationScript)&&this._animationScript.stop()},pause:function(){cc.isValid(this._animationScript)&&this._animationScript.pause()},resume:function(t,e){cc.isValid(this._animationScript)&&this._animationScript.resume()},getUrl:function(t){return t&&"animate/"+t},loadClip:function(i,n){var o=this,t=this._getAnimationState(i);if(t)n&&n(i,t);else{var r=this.getUrl(i);clog(">>>>>>>   "+r),cc.loader.loadRes(r,function(t,e){cc.isValid(o)&&(t||!e?(clog(">>>>>>>  err "+r,t,e),n&&n(i,!1)):(o._addClip(e,i),n&&n(i,!0)))})}},unloadClips:function(){var t=this._getClips();if(t&&0<t.length)for(var e=t.length-1;0<=e;e--){var i=t[e];this._removeClip(i,!0);var n=this.getUrl(i.name),o=cc.loader.getDependsRecursively(n);cc.loader.release(o)}},_onStartWhenLoad:function(){this.playOnLoad&&this.playAsyn()},_getAnimationState:function(t){return cc.isValid(this._animationScript)?this._animationScript.getAnimationState(t):null},_getClips:function(t,e){return cc.isValid(this._animationScript)?this._animationScript.getClips():null},_addClip:function(t,e){return cc.isValid(this._animationScript)?this._animationScript.addClip(t,e):null},_removeClip:function(t){cc.isValid(this._animationScript)&&this._animationScript.removeClip(t,!0)},_onCheckAutoRelase:function(){cc.isValid(this.node)&&this.isAutoRelease&&(this._animationScript.destroy(),this._animationScript=null,this.node.destroy(),clog("start  >> checkAutoRelase"))}}),cc._RF.pop()},{}],SpriteFrameManager:[function(t,e,i){"use strict";cc._RF.push(e,"b7c0f+uv0lNHoN7mqXe43vp","SpriteFrameManager");var n=t("ImageLoader"),o=t("SysTimerHelper"),r={_strogeCache:{},_strogeCount:0,_loadStrogeList:[],_loadStrogeCallMap:{},_isUsedFrameCahce:!1,loadSpriteFrame:function(t,e){if(t){var i=this.getSpriteFrame(t);if(i)return this._retainSpriteFrame(t),void(e&&e(null,i));this._clearUnUsedSpriteFrame(),this._checkAndStartLoadUrl(t,e)}else e&&e&&e("SpriteFrameManager.loadSpriteFrame invaild url",null)},setUsedFrameCahce:function(t){this._isUsedFrameCahce=t,this._clearUnUsedSpriteFrame()},_checkAndStartLoadUrl:function(t,e){if((i=this._loadStrogeCallMap[t])&&i.url&&i.callbacks)i.callbacks.push(e);else{var i={url:t,callbacks:[e]};this._loadStrogeCallMap[t]=i,this._onAsyncLoadAsset(i)}},stopAllTaskWhenPurge:function(){this._getLoader().cancleAllTask()},unload:function(t,e){this._clearSpriteFrameLoader(t,e)},getSpriteFrame:function(t){var e=this._strogeCache[t];return e&&e.spriteFrame},dumpCacheInfo:function(){clog("############# SpriteFrame Cache   ##############");var t=(cc.textureCache.getCachedTextureInfo()||"").split("KB");if(t)for(var e=0;e<t.length;e++)clog(t[e]+" KB")},_onAsyncLoadUrlList:function(){clog("_onAsyncLoadUrlList  time local  ....  ");for(var t=null;0<this._loadStrogeList.length&&(!t||!t.url);)t=this._loadStrogeList.shift();if(t&&t.url){var e=t.url,i=this.getSpriteFrame(e);i?(delete this._loadStrogeCallMap[e],this._retainAndCallbackByLoader(e,t.callbacks,null,i)):this._onAsyncLoadAsset(t)}else o.clear("time_frame_loader")},_onAsyncLoadAsset:function(t){var n=this;if(clog("_onAsyncLoadUrlList  time local  ....  "),t&&t.url){var o=t.url;this._loadSpriteFrame(t,o,function(t,e){var i=n._loadStrogeCallMap[o];i?(delete n._loadStrogeCallMap[o],n._retainAndCallbackByLoader(o,i.callbacks,t,e)):clog("_loadSpriteFrame  load cancel sprite frame  ",o)})}},_clearUnUsedSpriteFrame:function(t){if(!this._isUsedFrameCahce||t||50<this._strogeCount)for(var e in this._strogeCount=0,this._strogeCache){var i=this._strogeCache[e];i&&i.count<=0?(delete this._strogeCache[e],this._getLoader().release(e,i.spriteFrame)):this._strogeCount++}clog(">>>>>>>>>>>>>>>>>>  ===  ",this._strogeCount)},_loadSpriteFrame:function(i,n,o){clog(">>> _loadSpriteFrame ",i.taskId,n);clog(">>> _loadSpriteFrame by net",i.taskId,n,null,null),i.taskUrl=n,i.taskId=this._getLoader().loadSpriteFrame(n,null,function(t,e){t&&e?(clog(">>> _loadSpriteFrame result succeed",i.taskId,n,null,null),o(!0,e)):(clog(">>> _loadSpriteFrame result failed",i.taskId,n,null,null),o(!1,null))})},_retainAndCallbackByLoader:function(t,e,i,n){if(clog(">>> _loadSpriteFrame _retain start",t),n&&this._retainSpriteFrame(t,n),e)for(var o=0,r=e.length;o<r;o++){var c=e[o];c&&(n&&this._retainSpriteFrame(t,n),c&&c(!i,n))}n&&this._releaseSpriteFrame(t),clog(">>> _loadSpriteFrame _retain complete",t)},_clearSpriteFrameLoader:function(t,e){clog(">>> _loadSpriteFrame _clearSpriteFrameLoader ",t);var i=this._loadStrogeCallMap[t];if(e&&i&&i.callbacks&&0<i.callbacks.length){var n=i.callbacks;if(n.length<=1){if(e==n[0]){var o=i.taskId,r=i.taskUrl;return i.url=null,i.taskId=null,i.taskUrl=null,delete this._loadStrogeCallMap[t],void(o?(clog(">>> _clearSpriteFrameLoader asset.taskId ",o),this._getLoader().cancleTasK(o)):(clog(">>> _clearSpriteFrameLoader asset.taskId ",o,r),this._getLoader().cancleTasK(o,r||t)))}}else for(var c=0,s=n.length;c<s;c++)if(e==n[c])return void n.splice(c,1)}this._releaseSpriteFrame(t)},_getLoader:function(){return null==this._loader&&(this._loader=new n,this._loader.setMaxTask(8),this._loader.setTimeOut(5),this._loader.setConnectTimeOut(5)),this._loader},_getTime:function(){return(new Date).getTime()},_retainSpriteFrame:function(t,e){if(t){var i=this._strogeCache[t];i?(i.count=i.count+1,i.timestamp=this._getTime(),e&&e!=i.spriteFrame&&(this._getLoader().release(t,i.spriteFrame),i.spriteFrame=e)):(this._strogeCount++,this._strogeCache[t]={url:t,count:1,spriteFrame:e,timestamp:this._getTime()})}},_releaseSpriteFrame:function(t,e){if(t){var i=this._strogeCache[t];i&&(i.count=i.count-1,i.count<=0&&(this._isUsedFrameCahce&&!e||(this._getLoader().release(t,i.spriteFrame),this._strogeCount--,delete this._strogeCache[t])))}}};e.exports=r,cc._RF.pop()},{ImageLoader:"ImageLoader",SysTimerHelper:"SysTimerHelper"}],SysEventEmitor:[function(t,e,i){"use strict";cc._RF.push(e,"a7dad0F2BJM/ITmbXRO+Uok","SysEventEmitor");var n=cc.Class({name:"SysEventEmitor",ctor:function(){this._emitor=new cc.EventTarget},on:function(t,e,i,n){this._emitor.on(t,e,i,n)},off:function(t,e,i,n){this._emitor.off(t,e,i,n)},once:function(t,e,i,n){this._emitor.once(t,e,i,n)},emit:function(t,e){this._emitor.emit(t,e)}});e.exports=new n,cc._RF.pop()},{}],SysEventManager:[function(t,e,i){"use strict";cc._RF.push(e,"3be741zdh9GVaJNgUCyoTiN","SysEventManager");var n=t("SysEvent"),o=t("SysEventEmitor"),r=null;window&&(window.onKeyLeft=function(){r&&r.onSendKeyUpEvent(cc.KEY.left)},window.onKeyRight=function(){r&&r.onSendKeyUpEvent(cc.KEY.right)},window.onKeyUp=function(){r&&r.onSendKeyUpEvent(cc.KEY.up)},window.onKeyDown=function(){r&&r.onSendKeyUpEvent(cc.KEY.down)},window.onKeyEnter=function(){r&&r.onSendKeyUpEvent(cc.KEY.enter)},window.onKeyMenu=function(){r&&r.onSendKeyUpEvent(cc.KEY.menu)}),cc.Class({extends:n,properties:{independent:!1,_isSysEventStop:!1},onLoad:function(){window.ctime=window.clog=this.independent?cc.log:alert},onEnable:function(){this.independent?cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUpEventHandler,this):r=this,o.on("sys-event-enable",this._onScreenEventStart,this),o.on("sys-event-disable",this._onScreenEventStop,this)},onDisable:function(){this.independent?cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUpEventHandler,this):r=null,o.off("sys-event-enable",this._onScreenEventStart,this),o.off("sys-event-disable",this._onScreenEventStop,this)},sort:function(t){if(t&&0<t.length){for(var e=function(t){for(var e=0,i=t,n=0,o=null;i.parent;)e=e/10+((n=0<=(n=(o=i.parent.children).indexOf(i))?n:0)+1)/(o.length+2),i=i.parent;return e},i=0,n=t.length,o=0;o<n;o++){var r=t[o];r&&cc.isValid(r)&&(r.enabledInHierarchy||r.isAptotic())&&(t[i++]={info:r,zOrder:e(r.node)})}t.length=i,t.sort(function(t,e){return e.zOrder-t.zOrder})}else t.length=0},createJsEvent:function(t){return{_isStop:!1,keyCode:t,isStopped:function(){return this._isStop},stopPropagation:function(){this._isStop=!0}}},onKeyUpEventHandler:function(t){this._isSysEventStop||t&&this.onSendKeyUpEvent(t.keyCode)},onSendKeyUpEvent:function(t){if(!this._isSysEventStop){var e=this.createJsEvent(t);this.onNotifyKeyEvent(e,cc.SystemEvent.EventType.KEY_UP)}},onNotifyKeyEvent:function(t,e){clog("systemmanager ->>>    ",t&&t.keyCode,e);var i=this.node.getComponentsInChildren("SysEvent");if(i&&0<i.length){this.sort(i);for(var n=i.length,o=0;o<n&&!t.isStopped();o++)i[o].info._notify_sys_key(t,e)}},_onScreenEventStop:function(){this._isSysEventStop=!0},_onScreenEventStart:function(){this._isSysEventStop=!1}}),cc._RF.pop()},{SysEvent:"SysEvent",SysEventEmitor:"SysEventEmitor"}],SysEvent:[function(t,e,i){"use strict";cc._RF.push(e,"bd601aZ57tFFLs4uSyFO4LS","SysEvent"),cc.Class({extends:cc.Component,properties:{_isAptotic:!1},onLoad:function(){},safeGetFunctions:function(t){if(t)return this._event_functions||(this._event_functions={}),this._event_functions[t]},safeSetFunctions:function(t,e){t&&(this._event_functions||(this._event_functions={}),this._event_functions[t]=e)},isAptotic:function(){return this._isAptotic},setAptotic:function(t){this._isAptotic=t},off:function(t){t&&this.safeSetFunctions(t,null)},on:function(t,e,i){if(t&&e){i&&(e=e.bind(i));var n=this.safeGetFunctions(t);n||(n=[],this.safeSetFunctions(t,n)),n.push(e)}},onEventNotify:function(t,e){if(ctime("keyup onEventNotify start"),t){var i=this.safeGetFunctions(e);if(i)for(var n=0;n<i.length;n++)i[n](t)}ctime("keyup onEventNotify end")},_notify_sys_key:function(t,e){this.onEventNotify(t,e)}}),cc._RF.pop()},{}],SysFocusGroup:[function(t,e,i){"use strict";cc._RF.push(e,"420d0wSebtJepYgStvVgyhj","SysFocusGroup");var n=t("SysFocus");cc.Class({extends:cc.Component,properties:{Captivity:!1,AutoCatch:!1,entryFocus:{default:null,type:n},_focus:null,_focusGroup:!1},onLoad:function(){},isCaptivity:function(){return this.enabledInHierarchy&&this.Captivity},isFocusGroup:function(){return this._focusGroup},onSysFocusNode:function(t){t!=this._focus&&(this._focus=t,null!=this._focus?(this._focusGroup||(this._focusGroup=!0,this.onGroupGotFocus(this._focus)),this.AutoCatch&&(this.entryFocus=t),this.onGroupChangeFocus(this._focus)):this._focusGroup&&(this._focusGroup=!1,this.onGroupLoseFocus()))},onGroupGotFocus:function(t){},onGroupLoseFocus:function(){},onGroupChangeFocus:function(t){}}),cc._RF.pop()},{SysFocus:"SysFocus"}],SysFocusManager:[function(e,t,i){"use strict";cc._RF.push(t,"0cb6eDJ5sNK+rYbWmLJBvRJ","SysFocusManager");var o=e("SearchHelper"),n=e("SysEventEmitor"),a=e("ListScrollView");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.getComponent("SysEvent").on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUP,this)},onEnable:function(){n.on("sys-focus-disable-event",this.checkAndStopFocusByEvent,this),n.on("sys-focus-requrie-event",this.checkAndRequireFocusByEvent,this),n.on("sys-focus-get-event",this.checkAndGetFocusByEvent,this),n.on("sys-focus-wait-event",this.checkAndStopAutoFocusByEvent,this),n.on("sys-focus-auto-event",this.checkFocusWhenEmpty,this),this.checkFocusWhenEmpty()},onDisable:function(){this.checkAndStopAutoFocus(),n.off("sys-focus-disable-event",this.checkAndStopFocusByEvent,this),n.off("sys-focus-requrie-event",this.checkAndRequireFocusByEvent,this),n.off("sys-focus-get-event",this.checkAndGetFocusByEvent,this),n.off("sys-focus-wait-event",this.checkAndStopAutoFocusByEvent,this),n.off("sys-focus-auto-event",this.checkFocusWhenEmpty,this)},onKeyUP:function(t){switch(t.keyCode){case cc.KEY.f4:e("SpriteFrameManager").dumpCacheInfo();break;case cc.KEY.left:case cc.KEY.dpadLeft:this.searchFocus(-1,0),t.stopPropagation();break;case cc.KEY.right:case cc.KEY.dpadRight:this.searchFocus(1,0),t.stopPropagation();break;case cc.KEY.up:case cc.KEY.dpadUp:this.searchFocus(0,1),t.stopPropagation();break;case cc.KEY.down:case cc.KEY.dpadDown:this.searchFocus(0,-1),t.stopPropagation();break;case cc.KEY.enter:case cc.KEY.dpadCenter:this.clickFocusComfirm(),t.stopPropagation()}},checkFocusActive:function(t){return cc.isValid(t)&&t.isFocusActive()},showShockAction:function(t,e,i){if(!(0<t.getNumberOfRunningActions())){var n=t.x,o=t.y,r=n+15*(e||0),c=o+15*(i||0);t.runAction(cc.sequence(cc.moveTo(.1,cc.p(r,c)),cc.moveTo(.1,cc.p(n,o)),cc.moveTo(.1,cc.p(r,c)),cc.moveTo(.1,cc.p(n,o)),cc.moveTo(.1,cc.p(r,c)),cc.moveTo(.1,cc.p(n,o))))}},getBoundingBoxToWorld:function(t){var e=cc.rect(0,0,t.width,t.height);return cc._rectApplyAffineTransformIn(e,t.getNodeToWorldTransform())},search:function(t,e,i,n,o,r){for(var c=cc.view.getVisibleSize(),s=e?this.getBoundingBoxToWorld(e.node):cc.rect(0,c.height,0,0),a=.5*s.width,l=.5*s.height,u=cc.p(s.x+a,s.y+l),h=cc.p(i||0,n||0),f=Math.abs(h.x)+Math.abs(h.y)<.5,d=s.y,p=s.y+s.height,_=cc.p(u.x+a*h.x,u.y+l*h.y),g=null,y=null,v=null,m=0;m<t.length;m++){var S=t[m];if(e!=S&&this.checkFocusActive(S)){var b=f,C=null,F=this.getBoundingBoxToWorld(S.node);if(2160<F.y)continue;var x=cc.p(F.x+.5*F.width*(1-h.x),F.y+.5*F.height*(1-h.y));if(b)C=cc.pDistance(_,x);else if(.5<Math.abs(h.x)){var w=Math.abs(cc.pAngle(cc.pSub(x,_),h));(b=.495*Math.PI>=w)&&(o?(b=x.y>d&&x.y<p)&&(C=cc.pDistance(_,x)):(b=0<x.y&&x.y<c.height)&&(C=cc.pDistance(_,x)))}else{w=Math.abs(cc.pAngle(cc.pSub(x,_),h));(b=.495*Math.PI>=w)&&(b=!r||r.x<x.x&&r.x+r.width>x.x)&&(C=o?cc.pDistance(_,cc.p(_.x+.1*(x.x-_.x),x.y)):cc.pDistance(_,x))}if(b){var P=null==v;P||(Math.abs(v-C)<2?P=.5<Math.abs(h.y)?x.x<y.x:x.y>y.y:C<v&&(P=!0)),P&&(g=S,y=x,v=C)}}}return g},searchFocus:function(t,e){clog("setup  >> searchFocus",t,e);var i=null;if(this.checkFocusActive(this._current_focus)){var n=(i=this._current_focus).checkLinkingFocus(t,e);if(cc.isValid(n)){var o=n.getComponent("SysFocus");if(this.checkFocusActive(o))return this.focusNode(o)}else if(i.checkLinkingFocusEnabled(t,e))return void this.showShockAndAlignSize(i,t,e)}if(!this.searchInSpecial(i,t,e)){var r=this.node.getComponentsInChildren("SysFocus");if(o=this.search(r,i,t,e))return this.focusNode(o);this.showShockAndAlignSize(i,t,e)}},showShockAndAlignSize:function(t,e,i){t&&(t._disShowShock||this.showShockAction(t.node,e,i),cc.isValid(this._current_focus_scroll)&&this.checkAlignInfScrollView(this._current_focus_scroll,e,i))},searchInSpecial:function(t,e,i){var n=!1;if(cc.isValid(this._current_focus_group)){if(cc.isValid(this._current_focus_scroll)&&(n=o.isContain(this._current_focus_group.node,this._current_focus_scroll.node))&&this.searchInScrollView(t,e,i))return!0;if(this.searchInFocusGroup(t,e,i))return!0}if(!n&&this.searchInScrollView(t,e,i))return!0},searchInFocusGroup:function(t,e,i){if(cc.isValid(this._current_focus_group)){var n=this._current_focus_group.node.getComponentsInChildren("SysFocus"),o=this.search(n,t,e,i);if(o)return this.focusNode(o),!0;if(this._current_focus_group.isCaptivity())return this.showShockAndAlignSize(t,e,i),!0;n=null}return!1},searchInScrollView:function(t,e,i){if(cc.isValid(this._current_focus_scroll)){var n=this._current_focus_scroll,o=n.node.getComponentsInChildren("SysFocus"),r=this.getBoundingBoxToWorld(n.node),c=this.search(o,t,e,i,!0,r);if(o=null,c)return this.focusNode(c),!0;if(this.checkLoseFocusInScrollView(n,e,i))return!0;o=this.node.getComponentsInChildren("SysFocus"),c=this.search(o,t,e,i,!1,r);return o=null,c?this.focusNode(c):this.showShockAndAlignSize(t,e,i),!0}return!1},focusNode:function(t,e){cc.isValid(this._current_focus)&&this._current_focus.onSysLoseFocus();var i=this._current_focus=null;if(cc.isValid(t))for(var n=t.node;n.parent;){var o=n.getComponent("SysFocusGroup");if(o){i=o;break}n=n.parent}if(i!=this._current_focus_group&&(cc.isValid(this._current_focus_group)&&this._current_focus_group.onSysFocusNode(null),this._current_focus_group=i,cc.isValid(this._current_focus_group))){var r=this._current_focus_group.entryFocus;cc.isValid(r)&&(t=r)}this._current_focus=t;var c=null;if(cc.isValid(t))for(n=t.node;n.parent;){var s=n.getComponent(a);if(s){c=s;break}n=n.parent}cc.isValid(c)?this._current_focus_scroll=c:this._current_focus_scroll=null,cc.isValid(this._current_focus_group)&&this._current_focus_group.onSysFocusNode(t),this._current_focus==t&&(cc.isValid(this._current_focus)&&this._current_focus.onSysGotFocus(),cc.isValid(c)&&cc.isValid(this._current_focus)&&this.focusNodeInScrollView(c,this._current_focus,e))},focusNodeInScrollView:function(t,e,i){var n=e.node;n.scaleX=1,n.scaleY=1,t.focusNodeInScrollView(n,i,e._fixYInScroll)},checkLoseFocusInScrollView:function(t,e,i){if(cc.isValid(t)&&t._autoScrolling&&t._autoScrollTargetDelta){var n=e||0,o=i||0;if(.5<Math.abs(n))return!0;if(.5<Math.abs(o))return!0}return!1},checkAlignInfScrollView:function(t,e,i){if(cc.isValid(t)){if(.5<i)return t.node.emit("focus-scroll-to-top");if(i<-.5)return t.node.emit("focus-scroll-to-bottom");if(.5<e)return t.node.emit("focus-scroll-to-right");if(e<-.5)return t.node.emit("focus-scroll-to-left")}},clickFocusComfirm:function(){cc.isValid(this._current_focus)&&this._current_focus.enabledInHierarchy&&this._current_focus.onConfirm()},checkAndStopAutoFocus:function(t){null!==this._setTimeId&&(clearTimeout(this._setTimeId),this._setTimeId=null)},checkFocusWhenEmpty:function(){var t=this;cc.isValid(this._current_focus)||(this.checkAndStopAutoFocus(),this._setTimeId=setTimeout(function(){t._current_focus&&cc.isValid(t._current_focus)&&t._current_focus.enabledInHierarchy||t.searchFocus(0,-1),t.checkFocusWhenEmpty()},1e3))},checkAndGetFocusByEvent:function(t){var e=t.detail;e&&cc.isValid(this._current_focus)&&e(this._current_focus)},checkAndStopAutoFocusByEvent:function(t){this.focusNode(null),this.checkAndStopAutoFocus()},checkAndStopFocusByEvent:function(t){var e=t.detail;cc.isValid(e)&&e==this._current_focus&&(this.focusNode(null),this.checkFocusWhenEmpty())},checkAndRequireFocusByEvent:function(t){var e=t.detail;if(e&&e.script){var i=e.script;cc.isValid(i)&&(i!=this._current_focus||e.immediately)&&this.focusNode(i,e.immediately)}}}),cc._RF.pop()},{ListScrollView:"ListScrollView",SearchHelper:"SearchHelper",SpriteFrameManager:"SpriteFrameManager",SysEventEmitor:"SysEventEmitor"}],SysFocus:[function(t,e,i){"use strict";cc._RF.push(e,"bc19f/gv81Mrp7/7abdO9vj","SysFocus");var n=t("SysEventEmitor");cc.Class({extends:cc.Component,properties:{_focus:!1,_fixYInScroll:0,_disShowShock:!1},onEnable:function(){},onDisable:function(){this.isFocus()&&n.emit("sys-focus-disable-event",this)},isFocusActive:function(){return this.enabledInHierarchy},isFocus:function(){return this._focus},requireFocus:function(t){n.emit("sys-focus-requrie-event",{script:this,immediately:t})},loseFocus:function(){this.isFocus()&&(this._focus=!1,n.emit("sys-focus-disable-event",this))},checkLinkingFocus:function(t,e){return null},onSysGotFocus:function(){this._focus=!0,this.onGotFocus()},onSysLoseFocus:function(){this._focus=!1,this.onLoseFocus()},onGotFocus:function(){},onLoseFocus:function(){},onConfirm:function(){}}),cc._RF.pop()},{SysEventEmitor:"SysEventEmitor"}],SysTimerHelper:[function(t,e,i){"use strict";cc._RF.push(e,"c65a2VSf9RPBI5QLNOJ9NMR","SysTimerHelper");var n={_schedules:{},clear:function(t){var e=t&&this._schedules[t];e&&(this._clearSchedule(e),delete this._schedules[t])},pause:function(t){if(t){var e=this._schedules[t];if(e)if(e.repeat)this._clearSchedule(e);else{var i=e.timestamp||0,n=this._gettime()-i;e.time=Math.max(0,e.time-n),this._clearSchedule(e)}}},resume:function(t){if(t){var e=this._schedules[t];e&&(e.repeat?this.setInterval(t,e.time,e.call):this.setTimeout(t,e.time,e.call))}},setTimeout:function(n){function t(t,e,i){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(t,e,i){var n=this;if(t){var o=this._schedules[t];o?this._clearSchedule(o):this._schedules[t]=o={},o.repeat=!1,o.call=i,o.time=e,o.timestamp=this._gettime(),o.id=setTimeout(function(){n.clear(t),i&&i()},1e3*e)}}),isInterval:function(t){if(t)return!!this._schedules[t]},setInterval:function(n){function t(t,e,i){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(t,e,i){if(t){var n=this._schedules[t];n?this._clearSchedule(n):this._schedules[t]=n={},n.repeat=!0,n.call=i,n.time=e,n.id=setInterval(i,1e3*e)}}),_gettime:function(){return(new Date).getTime()/1e3},_clearSchedule:function(t){t&&(t.repeat?clearInterval(t.id):clearTimeout(t.id))}};e.exports=n,cc._RF.pop()},{}],ToggleFocus:[function(t,e,i){"use strict";cc._RF.push(e,"c5881dUvGhID4yxCwjkEnfc","ToggleFocus");var n=t("Focusable");cc.Class({extends:n,properties:{focusNode:{default:null,type:cc.Node},normalNode:{default:null,type:cc.Node},scaleNode:{default:null,type:cc.Node},scaleSize:1.08,_onConfirmCall:null},on:function(t,e){var i=t;e&&(i=function(){cc.isValid(e)&&t.bind(e)()}),this._onConfirmCall=i},off:function(){this._onConfirmCall=null},onGotFocus:function(){if(this._super(),cc.isValid(this.scaleNode)){this.scaleNode.stopActionByTag(3001);var t=cc.scaleTo(.2,this.scaleSize);t.setTag(3001),this.scaleNode.runAction(t)}cc.isValid(this.focusNode)&&(this.focusNode.active=!0),cc.isValid(this.normalNode)&&(this.normalNode.active=!1)},onLoseFocus:function(){if(this._super(),cc.isValid(this.scaleNode)){this.scaleNode.stopActionByTag(3001);var t=cc.scaleTo(.2,1);t.setTag(3001),this.scaleNode.runAction(t)}cc.isValid(this.focusNode)&&(this.focusNode.active=!1),cc.isValid(this.normalNode)&&(this.normalNode.active=!0)},onConfirm:function(){this._onConfirmCall&&this._onConfirmCall()}}),cc._RF.pop()},{Focusable:"Focusable"}]},{},["Bullet","Eneny","EnenyBullet","EnenyLaunch","Player","BlockBuilder","ColorBlock","ExitButton","Game","Menu","MenuButton","NetImage","SysEvent","SysEventEmitor","SysEventManager","SysFocus","SysFocusGroup","SysFocusManager","CardName","Focusable","ToggleFocus","ImageLoader","PrefabLoader","PrefabParser","PrefabPoolManager","SearchHelper","ShaderHelper","SimpleLayout","SpriteAnimator","SpriteFrameManager","SysTimerHelper","ItemCard","ItemCricle","ItemList","ListLayout","ListScrollView","MerryGoScroll"]);